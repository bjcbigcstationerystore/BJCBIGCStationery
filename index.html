<!DOCTYPE html>
<html lang="th">
<head>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BJC Big C Stationery Store</title>
  <link rel="icon" type="image/svg+xml"
  href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><text y='14' font-size='14'>ðŸ›’</text></svg>'" />
    
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #summaryContent .form-value ul{ margin:0; padding-left:1.25rem; }
#summaryContent .form-value li{ line-height:1.45; }
    
    :root{
  --emerald-900:#064e3b;
  --emerald-800:#065f46;
  --emerald-700:#047857;
  --emerald-600:#059669;
  --emerald-500:#10b981;
  --logo-h:24px; /* à¸¥à¸”à¸ˆà¸²à¸ 32px -> 24px */
}
    html,body{
  height:100%;
  margin:0;
  font-family:'Prompt',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:#0f172a;
}

/* ===== à¸«à¸™à¹‰à¸²à¹à¸£à¸ (verify / home) à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸žà¸·à¹‰à¸™à¹€à¸‚à¸µà¸¢à¸§ ===== */
body.verify,
html.verify{
  background:
    radial-gradient(1000px 400px at 20% -10%, rgba(5,150,105,.25) 0%, transparent 70%),
    radial-gradient(1000px 400px at 80% 110%, rgba(4,120,87,.22) 0%, transparent 70%),
    linear-gradient(180deg,#10b981 0%, #059669 45%, #047857 100%);
}

/* ===== à¸«à¸™à¹‰à¸²à¸­à¸·à¹ˆà¸™à¹ƒà¸«à¹‰à¸žà¸·à¹‰à¸™à¹€à¸—à¸² ===== */
body.category,
html.category,
body.products,
html.products,
body.summary,
html.summary{
  background:#f3f4f6 !important; /* à¹€à¸—à¸²à¸­à¹ˆà¸­à¸™ */
}
    
    
/* à¸¢à¹ˆà¸­à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸§à¹ˆà¸²à¸‡à¸£à¸­à¸šà¸«à¸™à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸¥à¹‡à¸à¸¥à¸‡ */
.page-container{
  display:flex; justify-content:center; width:100%; min-height:100vh;
  padding:1rem .75rem 1rem;        /* à¹€à¸”à¸´à¸¡ 2rem â†’ 1rem */
}

/* à¹€à¸”à¸ªà¸à¹Œà¸—à¹‡à¸­à¸›: à¸¥à¸”à¸ªà¹€à¸à¸¥à¸•à¸±à¸§à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­/à¸£à¸°à¸¢à¸°à¸£à¸§à¸¡ à¹† à¸¥à¸‡à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ */
@media (min-width: 1024px){
  html{ font-size:15px; }          /* à¹€à¸”à¸´à¸¡à¹€à¸šà¸£à¸²à¸§à¹Œà¹€à¸‹à¸­à¸£à¹Œ ~16px â†’ 15px */
}
    .page-container.centered{align-items:center}.page-container.top{align-items:flex-start}
   /* à¹„à¸¡à¹ˆà¹ƒà¸«à¹‰ content-card à¸¥à¹‡à¸­à¸à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡ + à¸šà¸±à¸‡à¸„à¸±à¸šà¹€à¸•à¹‡à¸¡à¸ˆà¸­à¹ƒà¸™à¸«à¸™à¹‰à¸² category */
body.category #mainCard{
  width: 100% !important;          /* â¬…ï¸ à¹ƒà¸ªà¹ˆà¹€à¸žà¸´à¹ˆà¸¡ */
  max-width: none !important;
  margin: 0 !important;            /* à¸à¸±à¸™à¸–à¸¹à¸à¸ˆà¸±à¸”à¸à¸¶à¹ˆà¸‡à¸à¸¥à¸²à¸‡ */
  padding: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  display: block !important;
}
    /* à¹ƒà¸«à¹‰à¸«à¸™à¹‰à¸²à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸à¸§à¹‰à¸²à¸‡à¹€à¸•à¹‡à¸¡à¸ˆà¸­à¸ˆà¸£à¸´à¸‡ à¹† */
body.category .category-inner{
  max-width:100% !important;
  width:100% !important;
  margin:0 auto !important;
}

/* âœ… à¸à¸£à¸­à¸šà¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§à¸à¸´à¸™à¹€à¸•à¹‡à¸¡ viewport à¸‹à¹‰à¸²à¸¢-à¸‚à¸§à¸² */
body.category .green-shell,
body.products .green-shell,
body.summary .green-shell{
  position: relative;
  width: 100dvw !important;
  max-width: 100dvw !important;
  margin: 0 !important;
  left: 0 !important;
  right: 0 !important;
  padding: 0 !important;
  border-radius: 0 !important;
  overflow: visible !important;
}

/* âœ… à¸ªà¹ˆà¸§à¸™à¸žà¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¸‚à¸²à¸§à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¹ƒà¸«à¹‰à¹€à¸•à¹‡à¸¡à¸”à¹‰à¸§à¸¢ (à¹€à¸‰à¸žà¸²à¸° Category) */
body.category .panel{
  width: 100dvw !important;
  max-width: 100dvw !important;
  margin: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  border: 0 !important;
  background: #f9fafb !important;
}
    .corner-logo{display:none}
    body.not-home .corner-logo{display:block}
    .corner-logo{height:var(--logo-h)!important;width:auto!important}
    .logo-box img{height:var(--logo-h);width:auto;display:block}
    .btn-primary{background:linear-gradient(135deg,var(--emerald-500),var(--emerald-600));transition:.25s}
    .btn-primary:hover{background:linear-gradient(135deg,var(--emerald-600),var(--emerald-700));transform:translateY(-2px);box-shadow:0 10px 25px rgba(16,185,129,.3)}
    .alert-success{background:#ecfdf5;border:1px solid #bbf7d0;color:#065f46;border-radius:12px}
    
    /* à¹ƒà¸«à¹‰ summary à¹„à¸¡à¹ˆà¹€à¸«à¸¥à¸·à¸­à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸šà¸™-à¸‚à¹‰à¸²à¸‡ */
body.category .page-container{ padding:0 !important; }
body.summary  .page-container{ padding:0 !important; }  
body.category #mainCard{ padding:0 !important; background:transparent !important; box-shadow:none !important; border-radius:0 !important; }

body.category .green-shell{
  border-radius:0 !important;   /* à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹‚à¸„à¹‰à¸‡ */
  margin:0 !important;          /* à¹„à¸¡à¹ˆà¸—à¸´à¹‰à¸‡à¸‚à¸­à¸š */
  padding:0 !important;
  overflow:visible !important;  /* à¸à¸±à¸™à¸–à¸¹à¸à¸•à¸±à¸” */
}

/* à¸•à¸±à¸”à¸à¸£à¸­à¸šà¸‚à¸²à¸§à¸‚à¸­à¸‡ panel à¸—à¸´à¹‰à¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” */
body.category .panel{
  background:transparent !important;
  box-shadow:none !important;
  border-radius:0 !important;
}
body.category .panel-head{  padding:8px 12px !important; }
body.category .panel-body{  padding:8px 12px !important; }
    /* hero à¹ƒà¸«à¹‰à¹€à¸•à¸µà¹‰à¸¢à¸¥à¸‡ + à¸Ÿà¸­à¸™à¸•à¹Œà¹€à¸¥à¹‡à¸à¸¥à¸‡à¸™à¸´à¸” */
.hero{
  position:relative; margin:0;
  padding:4px 12px 6px;           /* â¬…ï¸ à¹€à¸•à¸µà¹‰à¸¢à¸¥à¸‡à¸­à¸µà¸ à¹€à¸žà¸·à¹ˆà¸­à¸”à¸±à¸™à¸à¸£à¸´à¸”à¸‚à¸¶à¹‰à¸™ */
  text-align:center; color:#ecfdf5;
  background:
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)),
    linear-gradient(180deg,#3a7a68 0%,#2f6f60 55%,#2b6758 100%);
}
.hero-title{ font-size:1.6rem; font-weight:800; margin:0; }   /* à¹€à¸”à¸´à¸¡ 2rem */
.hero-sub{ margin-top:2px; font-size:.9rem; letter-spacing:.18rem; opacity:.95; }
.hero-desc{ font-weight:700; color:#f2fff7; }  
    .logo-box{position:absolute;top:14px;right:18px;background:#fff;border-radius:12px;padding:6px 10px;box-shadow:0 3px 8px rgba(0,0,0,.2);display:flex;align-items:center;gap:4px}
    

    /* à¸›à¸¸à¹ˆà¸¡à¸à¸¥à¸±à¸š (à¹à¸šà¸šà¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸šà¸«à¸™à¹‰à¸²à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™/à¸«à¸¡à¸§à¸”) */
    .back-btn{
      position:absolute;bottom:18px;right:28px;background:#fff;border:1px solid #e5e7eb;
      border-radius:9999px;padding:.6rem 1rem;display:flex;align-items:center;gap:6px;
      color:var(--emerald-700);font-weight:700;box-shadow:0 8px 18px rgba(0,0,0,.08);
      transition:transform .15s, box-shadow .15s;
    }
    .back-btn:hover{transform:translateX(-2px);box-shadow:0 12px 24px rgba(0,0,0,.12)}
    
  
    /* Modal */
    .modal-mask{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:9999}
    .modal{background:#fff;border-radius:18px;max-width:520px;width:92%;padding:22px 22px 20px;box-shadow:0 25px 60px rgba(0,0,0,.25)}
    .qty-btn{width:38px;height:38px;border-radius:9999px;border:1px solid #e5e7eb;background:#fff;font-weight:800}
    .price-green{color:#059669;font-weight:800}

    /* ===== Cart floating button + badge ===== */
    .cart-btn{
      position:absolute;
      top:72px;
      right:18px;
      width:56px;
      height:56px;
      border-radius:16px;
      background:linear-gradient(180deg,#0f5b46,#0e4f3e);
      box-shadow:0 12px 28px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.08);
      display:none;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      z-index: 50; /* â¬…ï¸ à¸à¸±à¸™à¸–à¸¹à¸ hero/panel à¸—à¸±à¸š */
    }
    .cart-btn.show{ display:flex; } /* à¸ˆà¸°à¹‚à¸Šà¸§à¹Œà¸•à¹ˆà¸­à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸„à¸¥à¸²à¸ª .show à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ */
    .cart-btn svg{ width:28px; height:28px; color:#ecfdf5; }
    .cart-badge{
      position:absolute;
      top:-6px;
      right:-6px;
      min-width:22px;
      height:22px;
      padding:0 6px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(135deg,#ff4da0,#ff7a59);
      color:#fff;
      font-weight:800;
      font-size:.8rem;
      border-radius:9999px;
      box-shadow:0 6px 14px rgba(0,0,0,.25);
    }

    /* ===== Cart Drawer (à¸«à¸™à¹‰à¸²à¸ªà¸£à¸¸à¸›) ===== */
    .cart-mask{ position:fixed; inset:0; z-index:9998; background:rgba(0,0,0,.45); display:none; }
    .cart-mask.show{ display:block; }
    .cart-panel{
      position:fixed; right:0; top:0; bottom:0; width:360px; max-width:90%;
      display:flex; flex-direction:column; background:#f1f8f4; box-shadow:-16px 0 48px rgba(0,0,0,.25);
    }
    .cart-header{
      padding:18px; background:linear-gradient(180deg,#1e6a57,#155844); color:#ecfdf5; position:relative;
    }
    .cart-header .icon{
      width:60px; height:60px; border-radius:18px; background:linear-gradient(180deg,#0f5b46,#0e4f3e);
      display:flex; align-items:center; justify-content:center; position:absolute; right:18px; top:18px;
    }
    .cart-header .icon svg{ width:30px; height:30px; color:#ecfdf5; }
    .cart-header .icon .cart-badge{ top:-6px; right:-6px; }
    .cart-body{ flex:1 1 auto; padding:14px; overflow:auto; display:flex; flex-direction:column; gap:10px; }
    .cart-footer{
      position:sticky; /* à¹ƒà¸«à¹‰à¸„à¹‰à¸²à¸‡à¸—à¸µà¹ˆà¸à¹‰à¸™à¸‚à¸“à¸°à¹€à¸¥à¸·à¹ˆà¸­à¸™ */
      bottom:0; flex:0 0 auto; background:#e7f4ee; padding:14px; border-top:1px solid #cfe9de;
      box-shadow:0 -6px 12px rgba(0,0,0,.05); z-index:1;
    }
    /* à¹à¸–à¸š "à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”" à¸ˆà¸±à¸”à¸ªà¸­à¸‡à¸à¸±à¹ˆà¸‡à¸žà¸­à¸”à¸µ */
    .cart-total{ display:flex; align-items:baseline; justify-content:space-between; gap:12px; font-weight:700; font-size:.95rem; }
    .cart-total span:last-child{ font-weight:800; font-size:1.05rem; color:#10b981; /* à¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§à¸‚à¸­à¸‡à¸¢à¸­à¸”à¸£à¸§à¸¡ */ }
    /* à¸›à¸¸à¹ˆà¸¡à¸„à¸¹à¹ˆ: à¸à¸§à¹‰à¸²à¸‡à¹€à¸—à¹ˆà¸²à¸à¸±à¸™ à¹„à¸¡à¹ˆà¸šà¸´à¸”à¹€à¸šà¸µà¹‰à¸¢à¸§ */
    .cart-actions{ display:flex; gap:10px; margin-top:10px; }
    .cart-actions .cart-btn-secondary, .cart-actions .cart-btn-primary{
      flex:1 1 0; /* à¸à¸§à¹‰à¸²à¸‡à¹€à¸—à¹ˆà¸² à¹† à¸à¸±à¸™ */
      display:inline-flex; align-items:center; justify-content:center; min-height:44px; /* à¸„à¸§à¸²à¸¡à¸ªà¸¹à¸‡à¸„à¸‡à¸—à¸µà¹ˆ */
      padding:12px 14px; border:none; border-radius:12px; font-weight:800; font-size:.95rem; line-height:1; text-decoration:none;
    }
    .cart-actions .cart-btn-secondary{ background:#374151; color:#fff; }
    .cart-actions .cart-btn-primary{ background:#065f46; color:#fff; }

    /* à¸ˆà¸­à¹€à¸¥à¹‡à¸à¸¡à¸²à¸: à¹€à¸£à¸µà¸¢à¸‡à¹à¸™à¸§à¸•à¸±à¹‰à¸‡à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ */
    @media (max-width:380px){
      .cart-actions{ flex-direction:column; gap:8px; }
      .cart-actions .cart-btn-secondary, .cart-actions .cart-btn-primary{ width:100%; }
    }

    /* à¸à¸²à¸£à¹Œà¸”à¸£à¸²à¸¢à¸à¸²à¸£à¹ƒà¸™à¸•à¸°à¸à¸£à¹‰à¸² */
    .cart-item{
      display:grid; grid-template-columns: 1fr auto; gap:10px; background:#f9fefb;
      border:1px solid #e6f5ea; border-radius:14px; padding:10px 12px; box-shadow:0 6px 14px rgba(0,0,0,.04);
    }
    /* à¸à¸±à¹ˆà¸‡à¸‹à¹‰à¸²à¸¢: à¸£à¸¹à¸› + à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ */
    .cart-item .left{ display:flex; align-items:center; gap:8px; min-width:0; }
    .cart-item .thumb{
      width:38px; height:38px; flex:0 0 38px; border-radius:8px; background:#f8fafc; object-fit:contain; box-shadow:inset 0 0 0 1px #eef2f7;
    }
    .cart-item .info{ display:flex; flex-direction:column; min-width:0; }
    .cart-item .name{
      font-weight:600; /* à¹€à¸”à¸´à¸¡ 700 â†’ à¸¥à¸”à¸¥à¸‡ */
      font-size:.9rem; /* à¹€à¸”à¸´à¸¡ .95rem â†’ à¹€à¸¥à¹‡à¸à¸¥à¸‡ */
      line-height:1.2; color:#0f172a; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .cart-item .desc{
      font-size:.78rem; /* à¹€à¸¥à¹‡à¸à¸¥à¸‡à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ */
      color:#6b7280; line-height:1.15; margin-top:2px; display:block;
    }
    .cart-item .meta{
      font-weight:600; /* à¹€à¸”à¸´à¸¡ 700 â†’ à¸¥à¸”à¸¥à¸‡ */
      font-size:.85rem; color:#059669; margin-top:1px;
    }
    /* à¸à¸±à¹ˆà¸‡à¸‚à¸§à¸²: à¸£à¸²à¸„à¸²à¸ªà¸¸à¸—à¸˜à¸´à¸”à¹‰à¸²à¸™à¸šà¸™ + à¸›à¸¸à¹ˆà¸¡à¸¥à¸šà¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡ */
    .cart-item .right{ display:flex; flex-direction:column; align-items:flex-end; justify-content:space-between; }
    .cart-item .line{ font-weight:700; /* à¹€à¸”à¸´à¸¡ 800 â†’ à¸¥à¸”à¸¥à¸‡ */ font-size:.95rem; /* à¹€à¸”à¸´à¸¡ 1rem â†’ à¹€à¸¥à¹‡à¸à¸¥à¸‡ */ color:#10b981; }
    .cart-item .remove{
      margin-top:8px; background:#ffe6e9; color:#b91c1c; font-weight:600; /* à¹€à¸”à¸´à¸¡ 800 â†’ à¸¥à¸”à¸¥à¸‡ */
      border:none; border-radius:9999px; padding:.25rem .7rem; font-size:.8rem; /* à¹€à¸”à¸´à¸¡ .85rem â†’ à¹€à¸¥à¹‡à¸à¸¥à¸‡ */
    }

    /* Summary list (à¹ƒà¸«à¸¡à¹ˆ) */
    .sum-item{
      display:grid; grid-template-columns: 1fr auto; gap:10px; background:#ffffff; border:1px solid #e5e7eb;
      border-radius:14px; padding:12px 14px; box-shadow:0 6px 14px rgba(0,0,0,.04);
    }
    .sum-item .name{ font-weight:700; color:#0f172a; line-height:1.2; }
    .sum-item .desc{ font-size:.85rem; color:#6b7280; margin-top:2px; }
    .sum-item .meta{ color:#059669; font-weight:700; margin-top:1px; }
    .sum-item .line{ color:#10b981; font-weight:800; }
    
/* ===== Summary: Employee grid (à¸„à¸¹à¹ˆà¸‹à¹‰à¸²à¸¢-à¸‚à¸§à¸²) ===== */
.emp-grid {
  display:grid; grid-template-columns: 1fr 1fr; gap:10px;
}
.emp-cell{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; border:1px dashed #e5e7eb; border-radius:10px;
}
.emp-cell .field-label{ color:#6b7280; font-weight:700; }
.emp-cell .field-value{ color:#0f172a; font-weight:700; }

/* ===== Summary: Items table ===== */
.sum-table{
  width:100%; border-collapse:separate; border-spacing:0; overflow:hidden;
  border:1px solid #e5e7eb; border-radius:14px; background:#fff;
}
.sum-table thead th{
  background:#f8fafc;
  color:#111827;
  font-weight:800;
  padding:14px 16px;
  border-bottom:1px solid #e5e7eb;
}

/* à¸ˆà¸±à¸”à¹à¸™à¸§à¹ƒà¸«à¹‰à¸•à¸£à¸‡à¸à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¹à¸•à¹ˆà¸¥à¸°à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ */
.sum-col-idx     { width:68px;  text-align:center; }
.sum-table th.sum-col-idx { text-align:center; }

.sum-table th:nth-child(2) { text-align:left; }   /* à¸£à¸²à¸¢à¸à¸²à¸£ */

.sum-col-qty     { width:100px; text-align:center; }
.sum-table th.sum-col-qty { text-align:center; }

.sum-col-unit    { width:140px; text-align:right; white-space:nowrap; }
.sum-table th.sum-col-unit { text-align:right; }

.sum-col-line    { width:160px; text-align:right; white-space:nowrap; }
.sum-table th.sum-col-line { text-align:right; }
.sum-table tbody td{
  padding:14px 16px; border-bottom:1px solid #e5e7eb; vertical-align:middle;
}
.sum-table tfoot td{
  padding:14px 16px; background:#ecfdf5; font-weight:900; color:#065f46;
}
/* à¸à¸²à¸™: à¸¡à¸·à¸­à¸–à¸·à¸­/à¹à¸—à¹‡à¸šà¹€à¸¥à¹‡à¸• à¹ƒà¸Šà¹‰ px à¹ƒà¸à¸¥à¹‰à¹€à¸„à¸µà¸¢à¸‡à¸‚à¸­à¸‡à¹€à¸”à¸´à¸¡ */
.sum-col-idx{ width:60px; text-align:center; }
.sum-col-qty{ width:90px;  text-align:center; }
.sum-col-unit{ width:120px; text-align:right; white-space:nowrap; }
.sum-col-line{ width:130px; text-align:right; white-space:nowrap; }

/* à¹€à¸”à¸ªà¸à¹Œà¸—à¹‡à¸­à¸›: à¸Šà¸´à¸”à¸£à¸°à¸¢à¸°à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ "à¸ˆà¸³à¸™à¸§à¸™" à¹ƒà¸«à¹‰à¹ƒà¸à¸¥à¹‰ "à¸£à¸²à¸¢à¸à¸²à¸£" à¸¡à¸²à¸à¸‚à¸¶à¹‰à¸™ */
@media (min-width:1024px){
  /* à¸šà¸±à¸‡à¸„à¸±à¸š "à¸£à¸²à¸¢à¸à¸²à¸£" à¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¸à¸´à¸™à¸—à¸µà¹ˆà¸¡à¸²à¸à¹€à¸à¸´à¸™à¹„à¸› */
  .sum-table thead th:nth-child(2),
  .sum-table tbody td:nth-child(2){ width:46%; }   /* à¸–à¹‰à¸²à¸¢à¸±à¸‡à¸«à¹ˆà¸²à¸‡ à¸¥à¸”à¹€à¸›à¹‡à¸™ 44% à¹„à¸”à¹‰ */

  /* à¸‚à¸¢à¸²à¸¢à¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œà¸•à¸±à¸§à¹€à¸¥à¸‚à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¹ƒà¸«à¹‰à¹€à¸¥à¸·à¹ˆà¸­à¸™à¹€à¸‚à¹‰à¸²à¸¡à¸² */
  .sum-col-qty { width:12%; }   /* à¸–à¹‰à¸²à¸­à¸¢à¸²à¸à¸Šà¸´à¸”à¸­à¸µà¸ â†’ 13â€“14% */
  .sum-col-unit{ width:18%; }
  .sum-col-line{ width:18%; }
}
.sum-itembox{ display:flex; gap:10px; align-items:flex-start; }
.sum-thumb{
  width:34px; height:34px; border-radius:8px; background:#f1f5f9;
  object-fit:contain; box-shadow:inset 0 0 0 1px #e5e7eb;
}
.sum-name{ font-weight:800; color:#0f172a; line-height:1.2; }
.sum-desc{ font-size:.85rem; color:#6b7280; margin-top:2px; }    

/* ==== Summary: à¹ƒà¸«à¹‰ label à¸­à¸¢à¸¹à¹ˆà¸šà¸™ à¹à¸¥à¸°à¸ªà¸£à¹‰à¸²à¸‡à¸Šà¹ˆà¸­à¸‡à¸„à¸±à¹ˆà¸™à¹ƒà¸™à¸”à¹‰à¸²à¸™à¹ƒà¸™à¸‚à¸­à¸‡à¸à¸¥à¹ˆà¸­à¸‡à¸„à¹ˆà¸² ==== */
#summaryContent .field-row{
  display:flex;
  flex-direction:column;
  align-items:stretch;
  gap:.45rem;
  border-bottom:0;
  padding:.35rem 0;
}
#summaryContent .field-label{
  display:block; color:#374151; font-weight:600;
}
#summaryContent .field-value{
  display:block; background:#fff; padding:.9rem 1rem;
  border:1px solid #e5e7eb; border-radius:12px;
  box-shadow:inset 0 0 0 1px #eef2f7;
  color:#0f172a; font-weight:700;
}
 
/* FORCE inner padding for Summary boxes â€“ à¹€à¸§à¹‰à¸™ element à¸—à¸µà¹ˆà¸–à¸¹à¸ .hidden */
#summaryContent .form-value:not(.hidden),
#summaryContent .field-value:not(.hidden){
  background:#fff !important;
  border:1px solid #e5e7eb !important;
  border-radius:12px !important;
  padding:14px 18px !important;
  display:block !important;             /* à¹à¸ªà¸”à¸‡à¹€à¸‰à¸žà¸²à¸°à¸—à¸µà¹ˆà¹„à¸¡à¹ˆ .hidden */
  box-sizing:border-box !important;
  line-height:1.5 !important;
  color:#0f172a !important;
  font-weight:800 !important;
}
    /* â€¦à¹à¸¥à¹‰à¸§ â€œà¸«à¸±à¸à¸¥à¹‰à¸²à¸‡â€ à¹€à¸‰à¸žà¸²à¸° BU Admin à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸›à¸à¸•à¸´ */
#summaryContent #buAdminCard .form-field > .form-value,
.info-card.bu-admin .form-field > .form-value,
#s_bu_name.form-value,
#s_bu_email.form-value {
  font-weight: 400 !important;
}

/* à¸¢à¹‰à¸³à¸§à¹ˆà¸² .hidden à¸Šà¸™à¸°à¸—à¸¸à¸à¸à¸£à¸“à¸µà¹ƒà¸™ #summaryContent */
#summaryContent .hidden{ display:none !important; }

/* à¹ƒà¸«à¹‰ layout à¹€à¸›à¹‡à¸™ 2 à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ (à¸–à¹‰à¸²à¹‚à¸”à¸™à¸•à¸±à¸§à¸­à¸·à¹ˆà¸™à¸—à¸±à¸š) */
#summaryContent .form-grid{
  display:grid !important;
  grid-template-columns:1fr 1fr !important;
  gap:16px !important;
}
#summaryContent .form-field{
  display:flex !important;
  flex-direction:column !important;
  gap:8px !important;
}
#summaryContent .form-label{
  color:#4b5563 !important;
  font-weight:700 !important;
}

/* à¸¡à¸·à¸­à¸–à¸·à¸­à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œà¹€à¸”à¸µà¸¢à¸§ */
@media (max-width:768px){
  #summaryContent .form-grid{ grid-template-columns:1fr !important; }
}

    /* ============= FINAL OVERRIDE ============= */
#summaryContent .panel .panel-body .form-grid .form-field > .form-value,
#summaryContent .panel .panel-body .form-grid .form-field > #s_company.form-value,
#summaryContent .panel .panel-body .form-grid .form-field > #s_cost.form-value,
#summaryContent .panel .panel-body .form-grid .form-field > #s_empid.form-value,
#summaryContent .panel .panel-body .form-grid .form-field > #s_fullname.form-value,
#summaryContent .panel .panel-body .form-grid .form-field > #s_bu_name.form-value,
#summaryContent .panel .panel-body .form-grid .form-field > #s_bu_email.form-value{
  background:#fff !important;
  border:1px solid #e5e7eb !important;
  border-radius:12px !important;
  padding:14px 16px !important;
  box-sizing:border-box !important;
  line-height:1.45 !important;
  font-weight:400 !important;   /* â† à¹„à¸¡à¹ˆà¸¡à¸µ ** */
}
    #summaryContent .form-label{ font-size:.9rem !important; font-weight:600 !important; }
#summaryContent .dot + h4{ font-size:1.2rem !important; line-height:1.25 !important; }

/* à¸à¸±à¸™à¹€à¸„à¸ªà¹‚à¸”à¸™à¸•à¸±à¹‰à¸‡ display:flex à¸¡à¸² */
#summaryContent .form-value *{
  line-height:inherit !important;
}
  /* ===== Summary: tighten text inside employee/BU blocks only ===== */
#summaryContent .panel-body .dot + h4{
  font-size: 1.25rem !important;      /* à¸«à¸±à¸§à¸‚à¹‰à¸­ "à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹€à¸šà¸´à¸" à¹ƒà¸«à¹‰à¹€à¸¥à¹‡à¸à¸¥à¸‡ */
  line-height: 1.25 !important;
}

#summaryContent .form-label{
  font-size: .95rem !important;       /* à¸›à¹‰à¸²à¸¢à¸à¸³à¸à¸±à¸š (Company, Cost Center, ...) à¹ƒà¸«à¹‰à¹€à¸¥à¹‡à¸à¸¥à¸‡ */
  font-weight: 600 !important;
  color: #374151 !important;
}

/* à¸à¸¥à¹ˆà¸­à¸‡à¸„à¹ˆà¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Company/Employee ID/Full Name/BU Admin...) */
#summaryContent .form-value{
  font-size: 1rem !important;
  font-weight: 400 !important;   /* â† à¹€à¸”à¸´à¸¡ 800 */
  line-height: 1.45 !important;
  padding: 14px 16px !important;
  border-radius: 12px !important;
  border: 1px solid #e5e7eb !important;
  background: #fff !important;
  box-shadow: inset 0 0 0 1px #eef2f7 !important;
}
    /* à¸›à¸£à¸±à¸šà¹€à¸‰à¸žà¸²à¸°à¸Šà¹ˆà¸­à¸‡ BU Admin Name / Email à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£à¸›à¸à¸•à¸´ */
#s_bu_name.form-value,
#s_bu_email.form-value {
  font-weight: 400 !important;
}

/* à¸£à¸°à¸¢à¸°à¸«à¹ˆà¸²à¸‡à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸Šà¹ˆà¸­à¸‡à¹ƒà¸™à¸à¸£à¸´à¸” */
#summaryContent .form-grid{ gap: 14px !important; }
#summaryContent .form-field{ gap: 6px !important; }

/* à¸ˆà¸¸à¸”à¹€à¸‚à¸µà¸¢à¸§à¸«à¸™à¹‰à¸²à¸«à¸±à¸§à¸‚à¹‰à¸­à¹ƒà¸«à¹‰à¹€à¸¥à¹‡à¸à¸¥à¸‡à¸™à¸´à¸”à¸™à¸¶à¸‡ */
#summaryContent .dot{ width: .55rem !important; height: .55rem !important; }
    

    /* ===== THANK YOU (à¹à¸šà¸šà¸£à¸¹à¸›à¹à¸£à¸) ===== */
.thx-wrap{max-width:420px;margin:0 auto;padding:24px 16px 34px;}
.thx-card{background:#fff;border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.12);padding:24px 18px;position:relative;}
.thx-logo{position:absolute;top:14px;right:14px;height:32px;width:auto;background:#fff;border-radius:10px;padding:4px 6px;box-shadow:0 3px 8px rgba(0,0,0,.12);}
.thx-check{width:72px;height:72px;border-radius:9999px;display:flex;align-items:center;justify-content:center;margin:6px auto 14px;background:#22c55e;color:#fff;box-shadow:0 10px 24px rgba(34,197,94,.35);}
.thx-title{text-align:center;font-weight:900;font-size:1.55rem;color:#0f172a;}
.thx-sub{text-align:center;margin-top:6px;color:#6b7280;font-weight:600;font-size:.95rem;}
.thx-detail{margin-top:16px;background:#eef2ff;border:1px solid #e5e7eb;border-radius:16px;padding:16px 14px;box-shadow:0 8px 18px rgba(0,0,0,.06);}
.thx-detail h4{display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:10px;font-weight:900;color:#1f2937;}
.thx-grid{display:grid;gap:10px;}
.thx-row{display:flex;justify-content:space-between;background:#fff;border-radius:12px;padding:10px 12px;}
.thx-label{color:#6b7280;font-weight:700;}
.thx-value{color:#111827;font-weight:800;}
.thx-ref{color:#2563eb;font-weight:900;}
.thx-total{color:#10b981;font-weight:900;}
.thx-btn{margin-top:18px;width:100%;min-height:48px;border-radius:12px;font-weight:900;color:#fff;background:linear-gradient(135deg,#6366f1,#8b5cf6);display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 8px 18px rgba(99,102,241,.25);}
.thx-footer{margin-top:16px;text-align:center;color:#6b7280;font-weight:600;font-size:.9rem;}
.thx-footer .row{display:flex;gap:16px;justify-content:center;margin-top:6px;color:#334155;font-weight:800;}

body.thankyou .page-container{align-items:flex-start;padding-top:32px;}

    /* à¸‹à¹ˆà¸­à¸™à¹‚à¸¥à¹‚à¸à¹‰à¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™à¸•à¸±à¸§ global à¹€à¸‰à¸žà¸²à¸°à¸«à¸™à¹‰à¸²à¸‚à¸­à¸šà¸„à¸¸à¸“ */
body.thankyou .appbar{                     /* à¸‹à¹ˆà¸­à¸™ top appbar à¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§ */
  display:none !important;
}

/* à¸‹à¹ˆà¸­à¸™à¹‚à¸¥à¹‚à¸à¹‰à¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™ (à¹€à¸œà¸·à¹ˆà¸­à¸¡à¸µ) */
body.thankyou .corner-logo{ display:none !important; }

/* à¸à¸±à¸™à¸à¸£à¸­à¸šà¹‚à¸¥à¹‚à¸à¹‰à¹€à¸¥à¹‡à¸à¹ƒà¸™ hero à¸—à¸µà¹ˆà¸šà¸²à¸‡à¸˜à¸µà¸¡à¸­à¸²à¸ˆà¹‚à¸œà¸¥à¹ˆ (à¸à¸±à¸™à¹€à¸«à¸™à¸µà¸¢à¸§) */
body.thankyou .logo-box{ display:none !important; }

/* à¹ƒà¸«à¹‰à¸«à¸™à¹‰à¸² Thank You à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸žà¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¸—à¸±à¹‰à¸‡ html à¹à¸¥à¸° body */
html.thankyou,
body.thankyou {
  background:#f8fafc !important;
}

/* à¸•à¸±à¸” padding-top à¸—à¸µà¹ˆà¸›à¸à¸•à¸´à¹€à¸œà¸·à¹ˆà¸­à¹ƒà¸«à¹‰ appbar à¸­à¸­à¸à¹„à¸›à¸”à¹‰à¸§à¸¢ */
body.thankyou .page-container{
  padding: 24px 12px !important;           /* à¹„à¸¡à¹ˆà¸¡à¸µ calc(56px + â€¦) à¹à¸¥à¹‰à¸§ */
  align-items: flex-start;
}

/* à¸à¸²à¸£à¹Œà¸”à¸«à¸¥à¸±à¸à¸‚à¸­à¸‡à¸«à¸™à¹‰à¸² Thank You */
body.thankyou .content-card{
  background: transparent;
  box-shadow: none;
  padding: 0;
  max-width: 480px;
}
    body.verify  .content-card{ background:transparent !important; box-shadow:none !important; padding:0 !important; max-width:none !important; }
body.thankyou .content-card{ background:transparent; box-shadow:none; padding:0; }

/* â¬…ï¸ à¹€à¸žà¸´à¹ˆà¸¡à¸ªà¸³à¸«à¸£à¸±à¸š summary à¹ƒà¸«à¹‰à¹„à¸¡à¹ˆà¸—à¸´à¹‰à¸‡à¸£à¸°à¸¢à¸°à¸‚à¸­à¸šà¸šà¸™ */
body.summary #mainCard{
  background:transparent !important;
  box-shadow:none !important;
  padding:0 !important;
  border-radius:0 !important;
  max-width:none !important;
}


/* à¸à¸¥à¸¸à¹ˆà¸¡à¸ªà¹„à¸•à¸¥à¹Œà¸‚à¸­à¸‡à¸«à¸™à¹‰à¸²à¸‚à¸­à¸šà¸„à¸¸à¸“ (à¸£à¸¹à¸›à¸—à¸µà¹ˆ 2) */
.ty-wrap{ max-width:440px; margin:0 auto; }
.ty-check{
  width:88px; height:88px; border-radius:9999px; margin:8px auto 16px;
  display:flex; align-items:center; justify-content:center;
  background:#22c55e; color:#fff; box-shadow:0 10px 24px rgba(34,197,94,.35);
}
.ty-title{ text-align:center; font-weight:900; font-size:1.625rem; color:#0f172a; }
.ty-sub{ text-align:center; margin-top:8px; color:#6b7280; font-weight:600; }

.ty-card{
  margin-top:16px; background:#eaf1ff; border:1px solid #e5e7eb;
  border-radius:16px; padding:18px 16px; box-shadow:0 8px 18px rgba(0,0,0,.06);
}
.ty-card h4{ display:flex; align-items:center; justify-content:center; gap:8px;
  font-weight:900; color:#1f2937; margin-bottom:10px; }

.ty-grid{ display:grid; gap:10px; }
.ty-row{ display:flex; justify-content:space-between; align-items:center;
  background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:10px 12px; }
.ty-label{ color:#6b7280; font-weight:700; }
.ty-val{ color:#0f172a; font-weight:800; }
.ty-ref{ color:#2563eb; font-weight:900; }
.ty-total{ color:#10b981; font-weight:900; }

.ty-next{
  margin-top:16px;
  background: linear-gradient(180deg,#ffffff 0%, #fff7ed 100%);
  border: none;
  border-radius:16px;
  padding:18px 16px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  color:#334155;            /* à¸•à¸±à¸§à¹€à¸™à¸·à¹‰à¸­à¸«à¸² */
  font-weight:600;
  text-align:center;
}
.ty-next .emoji{            /* à¹„à¸­à¸„à¸­à¸™à¸”à¹‰à¸²à¸™à¸šà¸™ */
  font-size:28px;
  line-height:1;
}
.ty-next .title{            /* à¸«à¸±à¸§à¸‚à¹‰à¸­à¸«à¸™à¸² */
  color:#0f172a;
  font-weight:800;
}
.ty-next .desc{             /* à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸­à¸˜à¸´à¸šà¸²à¸¢ (à¸¡à¸µà¹€à¸§à¹‰à¸™à¸šà¸£à¸£à¸—à¸±à¸”) */
  color:#6b7280;
  line-height:1.6;
}

/* à¸›à¸¸à¹ˆà¸¡à¹€à¸‚à¸µà¸¢à¸§ à¹‚à¸—à¸™à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸šà¸«à¸™à¹‰à¸²à¸­à¸·à¹ˆà¸™ + à¹€à¸§à¹‰à¸™à¸«à¹ˆà¸²à¸‡à¸ˆà¸²à¸à¸à¸¥à¹ˆà¸­à¸‡ "à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸›" */
.ty-btn{
  width:100%;
  min-height:52px;
  margin-top:24px;                 /* â† à¸‚à¸¢à¸±à¸šà¸›à¸¸à¹ˆà¸¡à¸¥à¸‡à¸¡à¸² */
  border-radius:12px;
  font-weight:900;
  color:#fff;
  background:linear-gradient(135deg,#10b981,#059669); /* emerald-500 â†’ 600 */
  box-shadow:0 10px 22px rgba(16,185,129,.25);
}
.ty-btn:hover{
  background:linear-gradient(135deg,#059669,#047857);
  transform:translateY(-1px);
  box-shadow:0 14px 28px rgba(16,185,129,.35);
}
    
/* à¹€à¸ªà¹‰à¸™à¸„à¸±à¹ˆà¸™à¸šà¸²à¸‡ à¹† à¹€à¸«à¸™à¸·à¸­à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¸´à¸”à¸•à¹ˆà¸­ */
.ty-divider{
  height:1px;
  background:#e5e7eb;  /* à¹€à¸—à¸²à¸­à¹ˆà¸­à¸™ */
  margin:20px 0 12px;  /* à¹€à¸§à¹‰à¸™à¸šà¸™-à¸¥à¹ˆà¸²à¸‡à¸•à¸²à¸¡à¸ à¸²à¸žà¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ */
  border:0;
  border-radius:1px;
}

/* à¸‚à¸¢à¸±à¸šà¸šà¸£à¸£à¸—à¸±à¸” "à¸«à¸²à¸à¸¡à¸µà¸„à¸³à¸–à¸²à¸¡à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡" à¸¥à¸‡à¸¡à¸²à¸­à¸µà¸à¸™à¸´à¸” */
.ty-footer{
  margin-top:8px;
  text-align:center;
  color:#6b7280;
  font-weight:600;
  font-size:.9rem;
}
.ty-footer .row{
  margin-top:6px;
  display:flex;
  justify-content:center;
  gap:16px;
  color:#334155;
  font-weight:800;
}
/* ================== THANK YOU TYPO OVERRIDES ================== */
/* à¹ƒà¸Šà¹‰à¹€à¸‰à¸žà¸²à¸°à¸«à¸™à¹‰à¸² Thank You à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ */
body.thankyou .ty-title{
  /* à¸«à¸±à¸§à¸‚à¹‰à¸­à¹ƒà¸«à¸à¹ˆ: à¹ƒà¸«à¹‰ 'à¸«à¸™à¸²' à¹à¸•à¹ˆà¸¥à¸”à¸‚à¸™à¸²à¸”à¸™à¸´à¸”à¸«à¸™à¹ˆà¸­à¸¢à¹ƒà¸«à¹‰à¸žà¸­à¸”à¸µà¸ªà¸²à¸¢à¸•à¸² */
  font-weight:700 !important;     /* à¹€à¸”à¸´à¸¡ 900 */
  font-size:1.5rem !important;    /* à¹€à¸”à¸´à¸¡ 1.625rem */
  line-height:1.25 !important;
}

/* à¸«à¸±à¸§à¸‚à¹‰à¸­à¸¢à¹ˆà¸­à¸¢à¹ƒà¸™à¸à¸²à¸£à¹Œà¸” à¹à¸¥à¸°à¸«à¸±à¸§à¸‚à¹‰à¸­ "à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸›" à¹ƒà¸«à¹‰à¸«à¸™à¸² à¹à¸•à¹ˆà¸‚à¸™à¸²à¸”à¸à¸£à¸°à¸Šà¸±à¸š */
body.thankyou .ty-card h4,
body.thankyou .ty-next .title{
  font-weight:700 !important;     /* à¹€à¸”à¸´à¸¡ 800â€“900 */
  font-size:1.0625rem !important; /* â‰ˆ 17px */
  line-height:1.35 !important;
}

/* "à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸«à¸±à¸§à¸‚à¹‰à¸­" â†’ à¹„à¸¡à¹ˆà¸«à¸™à¸² + à¸‚à¸™à¸²à¸”à¸›à¸à¸•à¸´ */
body.thankyou .ty-sub,
body.thankyou .ty-card,
body.thankyou .ty-grid,
body.thankyou .ty-row,
body.thankyou .ty-label,
body.thankyou .ty-val,
body.thankyou .ty-ref,
body.thankyou .ty-total,
body.thankyou .ty-next,
body.thankyou .ty-next .desc,
body.thankyou .ty-footer,
body.thankyou .ty-footer .row,
body.thankyou .ty-btn{
  font-weight:400 !important;
  font-size:1rem !important;
  line-height:1.5 !important;
}

/* à¸£à¸±à¸à¸©à¸²à¹‚à¸—à¸™à¸ªà¸µà¹€à¸”à¸´à¸¡à¸‚à¸­à¸‡ 'à¹€à¸¥à¸‚à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡' à¹à¸¥à¸° 'à¸£à¸²à¸„à¸²à¸£à¸§à¸¡' à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¸—à¸³à¹ƒà¸«à¹‰à¸«à¸™à¸² */
body.thankyou .ty-ref{ color:#2563eb !important; }
body.thankyou .ty-total{ color:#10b981 !important; }

/* à¸Ÿà¸¸à¸•à¹€à¸•à¸­à¸£à¹Œ: à¸„à¸‡ .9rem à¸–à¹‰à¸²à¸Šà¸­à¸šà¹ƒà¸«à¹‰à¹€à¸¥à¹‡à¸à¸à¸§à¹ˆà¸²à¸šà¸­à¸”à¸µà¹‰à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ à¸à¹‡à¹€à¸­à¸²à¸šà¸£à¸£à¸—à¸±à¸”à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¸­à¸­à¸à¸„à¸­à¸¡à¹€à¸¡à¸™à¸•à¹Œà¹à¸—à¸™ */
 /* body.thankyou .ty-footer,
    body.thankyou .ty-footer .row{ font-size:.9rem !important; } */

    
   /* ===== BLOCKED â€“ à¸ªà¹„à¸•à¸¥à¹Œà¸•à¸£à¸‡à¸£à¸¹à¸› 2 ===== */
.blk-wrap{ max-width:880px; margin:0 auto; padding:48px 16px 56px; }

.blk-card{
  position:relative;
  background:#ffffff;
  border-radius:28px;
  box-shadow:0 26px 56px rgba(0,0,0,.14);
  /* â†‘ à¹ƒà¸«à¹‰à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸”à¹‰à¸²à¸™à¸šà¸™à¸žà¸­à¸ªà¸³à¸«à¸£à¸±à¸šà¸§à¸²à¸‡à¹„à¸­à¸„à¸­à¸™à¸­à¸¢à¸¹à¹ˆ â€œà¹ƒà¸™à¸à¸£à¸­à¸šâ€ */
  padding:40px 32px 44px;
  text-align:center;
}

.blk-card > * + *{ margin-top:18px; }

.blk-title{ margin-top:10px; margin-bottom:8px; line-height:1.25; }
.blk-sub{   margin-top:2px;  line-height:1.6;  }

.blk-icon{
  width:96px; height:96px; border-radius:9999px;
  /* â†‘ à¸§à¸²à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸à¸£à¸­à¸š à¹„à¸¡à¹ˆà¸¥à¹‰à¸™à¸­à¸­à¸à¸‚à¸­à¸šà¸šà¸™ */
  margin:0 auto 14px;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,#ffb36b 0%, #ff7a59 100%);
  box-shadow:0 14px 30px rgba(0,0,0,.18), inset 0 2px 0 rgba(255,255,255,.35);
}
    .blk-title{ margin-top:6px; }
.blk-sub{   margin-top:6px; }
.blk-icon svg{ width:46px; height:46px; color:#ffffff; }

.blk-title{ font-weight:800; font-size:2rem; color:#111827; margin-top:6px; }
.blk-sub{ color:#6b7280; font-weight:600; margin-top:6px; }

/* à¸à¸¥à¹ˆà¸­à¸‡à¸•à¸´à¸”à¸•à¹ˆà¸­ (à¸Ÿà¹‰à¸²-à¸¡à¹ˆà¸§à¸‡à¸­à¹ˆà¸­à¸™) */
.blk-admin{
  /* â†‘ à¹€à¸žà¸´à¹ˆà¸¡à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸£à¸­à¸šà¸à¸¥à¹ˆà¸­à¸‡à¹à¸¥à¸°à¸”à¹‰à¸²à¸™à¹ƒà¸™ */
  margin:24px auto 8px;
  background:linear-gradient(180deg,#f0f5ff 0%, #eef2ff 100%);
  border:1px solid #e6e9f2;
  border-radius:18px;
  padding:22px 18px;
  max-width:560px;
  line-height:1.6;
}
.blk-admin-title{ color:#334155; font-weight:800; margin-bottom:6px; }
.blk-admin-name{ color:#0f172a; font-weight:400; }
.blk-admin-email{
  display:inline-flex; align-items:center; gap:6px;
  margin-top:6px; color:#2563eb; font-weight:400; text-decoration:none;
}
/* à¸›à¸¸à¹ˆà¸¡à¸¡à¹ˆà¸§à¸‡à¹„à¸¥à¹ˆà¹€à¸‰à¸” + à¹„à¸­à¸„à¸­à¸™à¸šà¹‰à¸²à¸™ */
.blk-btn{
  width:100%;
  max-width:560px;
  /* â†‘ à¸‚à¸¢à¸±à¸šà¸›à¸¸à¹ˆà¸¡à¸¥à¸‡à¹ƒà¸«à¹‰à¸«à¹ˆà¸²à¸‡à¸ˆà¸²à¸à¸à¸¥à¹ˆà¸­à¸‡à¸•à¸´à¸”à¸•à¹ˆà¸­ */
  margin:28px auto 0;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-height:56px;
  border:0;
  border-radius:16px;
  color:#fff;
  font-weight:800;
  font-size:1.05rem;

  /* ðŸ’š à¹‚à¸—à¸™à¹€à¸‚à¸µà¸¢à¸§à¹€à¸«à¸¡à¸·à¸­à¸™ verify */
  background:linear-gradient(135deg,#10b981,#059669);
  box-shadow:0 16px 34px rgba(16,185,129,.30);

  transition:transform .18s, box-shadow .18s, background .18s;
}
.blk-btn:hover{
  background:linear-gradient(135deg,#059669,#047857);
  transform:translateY(-1px);
  box-shadow:0 18px 36px rgba(16,185,129,.34);
}
.blk-btn svg{ width:22px; height:22px; color:#fff; }

/* à¸‹à¹ˆà¸­à¸™à¹‚à¸¥à¹‚à¸à¹‰à¸¡à¸¸à¸¡ + à¸›à¸¸à¹ˆà¸¡à¸•à¸°à¸à¸£à¹‰à¸² à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡ */
body.blocked .corner-logo{ display:none !important; }
body.summary #cartFab,
body.thankyou #cartFab,
body.blocked #cartFab { display:none !important; }
    
body.blocked .appbar{ 
  display:none !important;
  }
body.blocked .page-container{ 
  padding: 2rem 1rem 2rem !important;
  }

/* à¸žà¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¹„à¸¥à¹ˆà¸ªà¸µà¹à¸šà¸šà¸£à¸¹à¸› 2 */
body.blocked{
  background:
    radial-gradient(1200px 480px at 15% -10%, #ffe9c4 0%, transparent 60%),
    radial-gradient(1200px 480px at 85% 120%, #ffd9ef 0%, transparent 60%),
    linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%) !important;
}

/* à¹€à¸­à¸²à¸à¸£à¸­à¸šà¸‚à¸²à¸§ global à¸‚à¸­à¸‡à¸«à¸™à¹‰à¸²à¸­à¸·à¹ˆà¸™à¸­à¸­à¸à¹€à¸‰à¸žà¸²à¸°à¸«à¸™à¹‰à¸²à¸™à¸µà¹‰ à¹à¸¥à¸°à¹ƒà¸«à¹‰à¸à¸§à¹‰à¸²à¸‡à¸žà¸­à¸”à¸µ */
body.blocked .content-card{
  background: transparent !important;
  box-shadow: none !important;
  padding: 0 !important;
  max-width: 960px !important;
}
    /* === Verify Card on white background === */

.verify-box{
  position:relative;
  background:#ffffff;
  border-radius:18px;
  border:1px solid rgba(15,23,42,.06);
  box-shadow:0 20px 42px rgba(2,8,23,.12);
  padding:70px 40px;
  text-align:center;
  width:100%;
  max-width:580px;
  margin:auto;
}
@media (max-width: 480px){
  .verify-box{
    padding:40px 24px;
    max-width:90vw;
  }
}

.verify-box::after{ content:none; }
    /* âœ… NEW: Logo sizing on verify page */
.verify-logo{
  margin: -40px auto 35px;         /* à¸‚à¸¢à¸±à¸šà¸‚à¸¶à¹‰à¸™à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ */
  display: flex;
  align-items: center;
  justify-content: center;
}
.verify-logo-img{
  max-width: 56%;
  height: auto;
}
@media (max-width: 480px){
  .verify-logo{
    margin: -10px auto 20px;
  }
  .verify-logo-img{ max-width: 70%; }
}

/* à¸›à¸£à¸±à¸šà¹€à¸‰à¸žà¸²à¸°à¹‚à¸¥à¹‚à¸à¹‰à¹ƒà¸™à¸§à¸‡à¸à¸¥à¸¡ verify à¹ƒà¸«à¹‰à¹„à¸¡à¹ˆà¸­à¸¶à¸”à¸­à¸±à¸” */
.logo-in-verify{
  width:auto;
  height:42px;     /* à¹‚à¸¥à¹‚à¸à¹‰à¸ˆà¸°à¸­à¸¢à¸¹à¹ˆà¸à¸¶à¹ˆà¸‡à¸à¸¥à¸²à¸‡à¸§à¸‡à¸à¸¥à¸¡à¸ªà¸§à¸¢à¸‚à¸¶à¹‰à¸™ */
}

.icon-credit{
  font-size:0.75rem;
  text-align:center;
  color:#94a3b8;
  margin-top:8px;
}

.icon-credit a{
  color:#047857;
  text-decoration:none;
}

.icon-credit a:hover{
  text-decoration:underline;
}

.verify-title{
  font-weight:700;
  font-size:1.7rem;
  letter-spacing:.01em;
  text-transform:uppercase;
  color:#0f172a;
  margin-bottom:.25rem;           /* à¹€à¸§à¹‰à¸™à¸«à¸±à¸§à¸‚à¹‰à¸­à¹ƒà¸«à¸à¹ˆà¸à¸±à¸šà¸«à¸±à¸§à¸‚à¹‰à¸­à¸£à¸­à¸‡ */
}
.verify-subtitle{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-size:1.5rem;
  color:#334155;
  font-weight:700;
  margin:.15rem 0 1.8rem;       /* à¹€à¸§à¹‰à¸™à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¹ƒà¸«à¹‰à¹ƒà¸à¸¥à¹‰à¸ à¸²à¸žà¹à¸£à¸ */
}
.verify-desc{
  font-size:.95rem;
  color:#64748b;
  text-align:left;
  margin: .15rem 0 .25rem;   /* à¸Šà¸´à¸”à¸Šà¹ˆà¸­à¸‡à¸à¸£à¸­à¸à¸‚à¸¶à¹‰à¸™ */
}
.input-wrapper{
  position:relative;
  width:100%;
  margin-top:.1rem;          /* à¸¥à¸”à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸šà¸™ wrapper */
}
.verify-input{
  width:100%;
  padding:12px 14px 12px 48px;
  text-align:left;
  background:#fff;
  border:1.5px solid #cbd5e1;
  border-radius:10px;
  font-size:1rem;
  color:#0f172a;
  transition: all .2s ease-in-out;
  margin-top:.25rem;         /* à¹€à¸”à¸´à¸¡ .5rem â†’ à¸à¸£à¸°à¸Šà¸±à¸š */
}
    
    /* === icon-in-input (à¸‹à¹‰à¸²à¸¢) === */
.input-wrapper{
  position:relative;
  width:100%;
}
.input-icon{
  position:absolute;
  left:14px;
  top:46%;
  transform:translateY(-50%);
  width:24px;
  height:24px;
  opacity:.9;
  pointer-events:none; /* à¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¸£à¸šà¸à¸§à¸™à¸à¸²à¸£à¸„à¸¥à¸´à¸à¹ƒà¸™ input */
}
    
.verify-input::placeholder{
  font-size:.95rem;         /* â†‘ */
  color:#94a3b8;
}
    
.verify-input:focus{
  outline:none;
  border-color:#10b981;
  box-shadow:0 0 0 3px rgba(16,185,129,.18);
}

/* à¸›à¸¸à¹ˆà¸¡à¸„à¸‡à¹‚à¸—à¸™à¹€à¸”à¸´à¸¡ */
.verify-action{
  width:100%;
  min-height:56px;                  /* â†‘ à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™ */
  padding:14px 18px;                /* â†‘ */
  border-radius:14px;
  font-weight:900;
  font-size:1.05rem;                /* â†‘ à¸‚à¸™à¸²à¸”à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£ */
  color:#fff;
  background:linear-gradient(135deg,#10b981,#059669);
  box-shadow:0 12px 26px rgba(16,185,129,.28);
}
.verify-action:hover{
  background:linear-gradient(135deg,#059669,#047857);
  transform:translateY(-1px);
}
    .verify-button {
  width: 100%;
  background: linear-gradient(to right, #10b981, #059669);
  color: #fff;
  font-weight: 600;
  border: none;
  border-radius: 12px;
  padding: 12px;
  cursor: pointer;
  transition: all .2s ease-in-out;
  /* à¸‚à¸¢à¸±à¸šà¸›à¸¸à¹ˆà¸¡à¸¥à¸‡à¹ƒà¸«à¹‰à¹‚à¸›à¸£à¹ˆà¸‡à¸‚à¸¶à¹‰à¸™ */
  margin-top: 2rem; /* â‰ˆ 28px */
}
                             
body.blocked .logo-box{
  display:none !important;
}      

/* à¸à¸±à¸™à¹‚à¸¥à¹‚à¸à¹‰à¸à¸¥à¹ˆà¸­à¸‡à¹€à¸¥à¹‡à¸à¹ƒà¸™ hero à¹€à¸œà¸¥à¸­à¹‚à¸œà¸¥à¹ˆ */
body.blocked .logo-box{
  display:none !important;
}

/* (à¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§) à¸‹à¹ˆà¸­à¸™à¹‚à¸¥à¹‚à¸à¹‰à¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™ + à¸›à¸¸à¹ˆà¸¡à¸•à¸°à¸à¸£à¹‰à¸² */
body.blocked .corner-logo{ display:none !important; }
body.blocked #cartFab { display:none !important; }
   
/* Category = à¹€à¸•à¹‡à¸¡à¸ˆà¸­à¸ˆà¸£à¸´à¸‡ à¹† */
body.category .page-container{
  width: 100% !important;
  max-width: none !important;
  margin: 0 !important;
  padding: 0 !important;        /* à¸•à¸±à¸”à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸”à¹‰à¸²à¸™à¸šà¸™/à¸‚à¹‰à¸²à¸‡ */
}

/* Products = à¹€à¸•à¹‡à¸¡à¸ˆà¸­à¸ˆà¸£à¸´à¸‡ à¹† */
body.products .page-container{
  width:100% !important;
  max-width:none !important;
  margin:0 !important;
  padding:0 !important;
}
/* Summary à¸„à¸¸à¸¡à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡à¸—à¸µà¹ˆà¸à¸²à¸£à¹Œà¸”à¸”à¹‰à¸²à¸™à¹ƒà¸™à¹à¸—à¸™ */
body.summary .page-container{
  width:min(1200px,92vw);
  margin:0 auto;
  padding:1.25rem 0;
}

/* à¹ƒà¸«à¹‰à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸”à¹‰à¸²à¸™à¹ƒà¸™ (panel / card) à¸”à¸¹à¸ªà¸¡à¸”à¸¸à¸¥à¸šà¸™à¸žà¸·à¹‰à¸™à¹€à¸—à¸² */
/* âœ… à¸à¸£à¸­à¸šà¸‚à¸²à¸§à¸Šà¸™à¸‹à¹‰à¸²à¸¢-à¸‚à¸§à¸² à¹„à¸¡à¹ˆà¸¡à¸µà¸¡à¸¸à¸¡à¹‚à¸„à¹‰à¸‡/à¹€à¸‡à¸² */
body.category .panel,
body.products .panel{
  width: 100vw !important;
  max-width: 100vw !important;
  margin: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  border: 0 !important;
}

/* à¸›à¸£à¸±à¸šà¸£à¸°à¸¢à¸°à¹€à¸§à¹‰à¸™à¸‚à¸­à¸šà¸£à¸¹à¸›à¹à¸¥à¸°à¸à¸²à¸£à¹Œà¸”à¹ƒà¸™à¸«à¸™à¹‰à¸²à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¹ƒà¸«à¹‰à¸à¸£à¸°à¸Šà¸±à¸šà¸‚à¸¶à¹‰à¸™ */
body.products .item-card{
  margin: 1rem auto !important;
  width: 100% !important;   /* à¹„à¸¡à¹ˆà¸šà¸µà¸šà¹€à¸à¸´à¸™à¸ˆà¸³à¹€à¸›à¹‡à¸™ */
  max-width: 420px;         /* à¹€à¸žà¸”à¸²à¸™à¸‚à¸™à¸²à¸”à¸‚à¸­à¸‡à¸à¸¥à¹ˆà¸­à¸‡à¹ƒà¸«à¹‰à¹€à¸¥à¹‡à¸à¸¥à¸‡ */
}

#categoryGrid{ display:grid !important; gap:18px !important; }

@media (max-width:480px){
  #categoryGrid{ grid-template-columns: repeat(2, 1fr) !important; }
}

@media (min-width:1024px){
  #categoryGrid{
    grid-template-columns: repeat(4, minmax(240px, 1fr)) !important;
    gap:20px !important;
    justify-content:center !important;
    max-width:1400px; margin:0 auto;
  }
}
    
#productGrid{
  padding: 0 12px !important;
}
@media (min-width: 481px){
  #productGrid{
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr)) !important;
    gap:18px !important;
    padding: 0 !important;          /* âœ… à¹ƒà¸«à¹‰à¸à¸£à¸´à¸”à¹„à¸¡à¹ˆà¸ªà¸£à¹‰à¸²à¸‡à¸à¸±à¹‰à¸™à¸‚à¸­à¸šà¹€à¸­à¸‡ */
    box-sizing: border-box;
    justify-content: center;         /* à¹à¸–à¸§à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢à¸ˆà¸°à¸­à¸¢à¸¹à¹ˆà¸à¸¥à¸²à¸‡ */
  }
}

    /* à¹€à¸§à¹‰à¸™à¸‚à¸­à¸šà¸‹à¹‰à¸²à¸¢-à¸‚à¸§à¸²à¹ƒà¸«à¹‰à¹€à¸—à¹ˆà¸²à¸à¸±à¸™à¸—à¸¸à¸à¸ˆà¸­ */
body.products .panel-body{
  padding: 12px clamp(14px, 2.4vw, 28px) !important;  /* â¬…ï¸ à¸‹à¹‰à¸²à¸¢=à¸‚à¸§à¸² à¹€à¸—à¹ˆà¸²à¸à¸±à¸™ */
}

/* à¸à¸±à¸™ padding à¸‹à¹‰à¸³à¸Šà¸±à¹‰à¸™à¸ˆà¸²à¸ .products-inner */
body.products .products-inner{
  padding-left: 0 !important;
  padding-right: 0 !important;
}
    
    #productGrid{
  margin: 0 auto !important;   /* à¸à¸¶à¹ˆà¸‡à¸à¸¥à¸²à¸‡à¸ à¸²à¸¢à¹ƒà¸™ panel-body */
  box-sizing: border-box;
}


.cat-icon{
  width:60px; 
  height:60px;   /* à¹ƒà¸«à¹‰à¹€à¸—à¹ˆà¸²à¸à¸±à¸š .prod-img à¹€à¸žà¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸ªà¸¶à¸à¹ƒà¸à¸¥à¹‰à¹€à¸„à¸µà¸¢à¸‡ */
  object-fit:contain;
  margin:0 auto 8px;
  border-radius:10px;
  transition:transform .2s ease;
}

/* à¸¢à¹ˆà¸­à¸Šà¸·à¹ˆà¸­à¸«à¸¡à¸§à¸”à¹ƒà¸«à¹‰à¸žà¸­à¸”à¸µà¸—à¸¸à¸à¸ˆà¸­ */
.cat-title{
  font-size:1.05rem;
  font-weight:700;
  color:#0f172a;
  line-height:1.25;
}

/* â€œx à¸£à¸²à¸¢à¸à¸²à¸£â€ à¹ƒà¸«à¹‰à¹€à¸¥à¹‡à¸à¸¥à¸‡à¹à¸¥à¸°à¸«à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢à¸¥à¸‡ */
.cat-count{
  margin-top:1px;
  color:#059669;
  font-weight:400;
  font-size: .875rem;  /* à¹€à¸žà¸´à¹ˆà¸¡à¸‚à¸™à¸²à¸”à¹à¸šà¸šà¸„à¸‡à¸—à¸µà¹ˆà¹€à¸žà¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸­à¹ˆà¸²à¸™à¸‡à¹ˆà¸²à¸¢ */
}

/* â€œx à¸£à¸²à¸¢à¸à¸²à¸£â€ = à¸•à¸±à¸§à¸›à¸à¸•à¸´ à¹„à¸¡à¹ˆà¸«à¸™à¸² */
.cat-count{
  margin-top:2px;
  color:#059669;
  font-weight:400;     /* â† à¹„à¸¡à¹ˆà¸«à¸™à¸² */
}


/* à¸à¸²à¸£à¹Œà¸”à¸ªà¸´à¸™à¸„à¹‰à¸²à¹€à¸¥à¹‡à¸à¸¥à¸‡à¸™à¸´à¸” */
body.products .prod-card{
  padding:10px !important;            /* à¹€à¸”à¸´à¸¡ 12 */
  border-radius:12px !important;       /* à¹€à¸”à¸´à¸¡ 14 */
  display:grid;                        /* à¸—à¸³à¹ƒà¸«à¹‰à¸ˆà¸±à¸”à¸§à¸²à¸‡à¹€à¸§à¹‰à¸™à¸Šà¹ˆà¸§à¸‡à¸”à¸µà¸‚à¸¶à¹‰à¸™ */
  grid-template-rows:auto 1fr auto;    /* à¸Šà¸·à¹ˆà¸­à¸ªà¸´à¸™à¸„à¹‰à¸²à¸­à¸¢à¸¹à¹ˆà¸à¸¥à¸²à¸‡, à¸£à¸²à¸„à¸²à¸­à¸¢à¸¹à¹ˆà¸¥à¹ˆà¸²à¸‡ */
}

/* âœ… à¸£à¸¹à¸›à¹„à¸¡à¹ˆà¹ƒà¸«à¸à¹ˆà¹€à¸à¸´à¸™ */
.prod-img{
  width:88px; height:88px;             /* à¹€à¸”à¸´à¸¡ 100x100 */
  object-fit:contain;
  margin:0 auto 10px;
  border-radius:10px;
  background:#f8fafc;
}
    
    /* ===== Products: à¸—à¸³à¹ƒà¸«à¹‰à¸à¸§à¹‰à¸²à¸‡à¹€à¸•à¹‡à¸¡à¸ˆà¸­à¹à¸šà¸šà¸«à¸™à¹‰à¸² Category ===== */
body.products #mainCard{
  width:100% !important;
  max-width:none !important;
  margin:0 !important;
  padding:0 !important;
  background:transparent !important;
  box-shadow:none !important;
  border-radius:0 !important;
  display:block !important;
}

/* à¹à¸–à¸šà¸«à¸±à¸§ (à¹€à¸‚à¸µà¸¢à¸§) à¹ƒà¸«à¹‰à¸à¸´à¸™à¹€à¸•à¹‡à¸¡ viewport */
body.products .green-shell{
  width:100vw !important;
  max-width:100vw !important;
  margin:0 !important;
  padding:0 !important;
  border-radius:0 !important;
  overflow:visible !important;
}

/* à¸Šà¸±à¹‰à¸™à¹ƒà¸™à¸‚à¸­à¸‡à¸«à¸™à¹‰à¸² products à¹ƒà¸«à¹‰à¸à¸§à¹‰à¸²à¸‡à¹€à¸•à¹‡à¸¡ */
body.products .products-inner{
  max-width:100% !important;
  width:100% !important;
  margin:0 auto !important;
}

/* à¸à¸²à¸£à¹Œà¸”/à¸žà¸²à¹€à¸™à¸¥à¸”à¹‰à¸²à¸™à¹ƒà¸™à¸„à¸¸à¸¡à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡à¸—à¸µà¹ˆà¸™à¸µà¹ˆ (à¹„à¸¡à¹ˆà¸šà¸µà¸šà¸—à¸±à¹‰à¸‡à¸«à¸™à¹‰à¸²) */
body.products .panel{
  width:min(1200px,92vw);
  margin:0 auto;
  background:#f3f4f6 !important;   /* à¹€à¸—à¸²à¸­à¹ˆà¸­à¸™à¸„à¸¥à¸¸à¸¡à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸à¸²à¸£à¹Œà¸” */
  border:0 !important;
  border-radius:0 !important;
  box-shadow:none !important;
}
/* âœ… à¸à¸²à¸£à¹Œà¸”à¸ªà¸´à¸™à¸„à¹‰à¸²: à¸‹à¹‰à¸²à¸¢-à¸‚à¸§à¸²à¹à¸„à¸šà¸¥à¸‡ à¸”à¸¹à¹‚à¸›à¸£à¹ˆà¸‡ */
body.products .prod-card{
  padding:10px 8px !important;      /* à¹€à¸”à¸´à¸¡ 12 à¸—à¸¸à¸à¸—à¸´à¸¨ â†’ à¸‹à¹‰à¸²à¸¢à¸‚à¸§à¸²à¹€à¸«à¸¥à¸·à¸­ 8px */
  border-radius:12px !important;
  background:#fff;
  border:1px solid #e5e7eb;
  display:grid;
  grid-template-rows:auto 1fr auto;
}

/* âœ… à¸£à¸¹à¸›à¸¢à¹ˆà¸­à¸¡à¸¥à¸‡à¸™à¸´à¸” à¹ƒà¸«à¹‰à¹€à¸«à¸¥à¸·à¸­à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ */
.prod-img{
  width:88px; height:88px;
  object-fit:contain;
  margin:0 auto 10px;
  border-radius:10px;
  background:#f8fafc;
}

/* à¸¡à¸·à¸­à¸–à¸·à¸­: à¸¥à¸”à¸£à¸¹à¸›à¸­à¸µà¸à¸™à¸´à¸” */
@media (max-width:480px){
  .prod-img{ width:80px; height:80px; }
}

body.products .panel-body{
  background:#f3f4f6 !important;
  padding:12px clamp(16px, 2vw, 28px) !important;
}


/* âœ… Category white header full-bleed */
.category-header-box,
.products-header-box{
  background:#ffffff;
  width: 100dvw !important;
  max-width: 100dvw !important;
  margin-left: calc(50% - 50dvw) !important;
  margin-right: calc(50% - 50dvw) !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  padding: 8px 12px !important;     /* à¸£à¸°à¸¢à¸°à¹€à¸—à¹ˆà¸²à¸à¸±à¸™ */
  margin-bottom: 10px !important;
  text-align:center;
}

.category-header-box h2,
.products-header-box h2{
  margin:0;
  font-size:1.25rem;
  font-weight:700;
  color:#065f46;
}

.category-header-box p,
.products-header-box p{
  margin-top:4px;
  font-size:0.95rem;
  font-weight:400;
  color:#475569;
}
    
/* âœ… à¹€à¸­à¸²à¸à¸²à¸£à¸¢à¹ˆà¸­à¸­à¸­à¸ à¹ƒà¸«à¹‰à¸‚à¸¢à¸²à¸¢à¹€à¸•à¹‡à¸¡à¹à¸¥à¸°à¸„à¸¡ */
body.category .category-inner{
  transform: none !important;
  transform-origin: initial !important;
  will-change: auto !important;
}

/* à¹ƒà¸«à¹‰à¸à¸£à¸­à¸šà¸‚à¸²à¸§à¹à¸¥à¸°à¸žà¸·à¹‰à¸™à¹€à¸‚à¸µà¸¢à¸§à¹€à¸•à¹‡à¸¡à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡ */
body.category,
body.category .green-shell,
body.category .page-container,
body.category #mainCard {
  width: 100% !important;
  max-width: none !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸à¸–à¸¹à¸à¸¢à¹ˆà¸­ à¹ƒà¸«à¹‰à¸¢à¸±à¸‡à¸­à¸¢à¸¹à¹ˆà¸•à¸£à¸‡à¸à¸¥à¸²à¸‡ */
body.category .page-container {
  display: flex;
  justify-content: center;
}

/* à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ scroll à¸”à¹‰à¸²à¸™à¸‚à¹‰à¸²à¸‡ */
body.category {
  overflow-x: hidden;
}

html, body{ overflow-x: hidden; }
/* âœ… à¹à¸à¹‰à¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸Šà¸´à¸”à¸‚à¸­à¸šà¸‹à¹‰à¸²à¸¢-à¸‚à¸§à¸²à¹€à¸à¸´à¸™à¹„à¸› */
body.category .category-inner,
body.products .products-inner {
  padding-left: 1rem !important;
  padding-right: 1rem !important;
  box-sizing: border-box !important;
}
    /* âœ… Category hero full-bleed */
body.category .hero{
  width: 100dvw !important;
  max-width: 100dvw !important;
  margin-left: calc(50% - 50dvw) !important;
  margin-right: calc(50% - 50dvw) !important;
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}


body.products .hero{
  width: 100dvw !important;
  max-width: 100dvw !important;
  margin-left: calc(50% - 50dvw) !important;
  margin-right: calc(50% - 50dvw) !important;
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

body.category .category-inner{
  max-width:100% !important;
  width:100% !important;
  margin:0 auto !important;
  padding-left: 1rem !important;
  padding-right: 1rem !important;
  transform:none !important;
  transform-origin: initial !important;
  box-sizing: border-box !important;
}


/* à¸¢à¹ˆà¸­à¸à¸¥à¹ˆà¸­à¸‡à¹ƒà¸«à¹‰à¸à¸£à¸°à¸Šà¸±à¸šà¸‚à¸¶à¹‰à¸™ */
body.category .cat-item {
  background:#fff !important;
  border:1px solid #e5e7eb !important;
  border-radius:12px !important;
  
  padding: 28px 16px !important;
  border-radius: 12px !important;
  min-height: 170px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  transition: background .2s ease, border-color .2s ease, box-shadow .2s ease, transform .2s ease;
}

/* à¸ˆà¸­ >= 768px à¸¢à¸ padding à¸‚à¸¶à¹‰à¸™à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¹ƒà¸«à¹‰à¸”à¸¹à¸ªà¸¡à¸ªà¹ˆà¸§à¸™ */
@media (min-width:768px){
  body.category .cat-item{
    padding: 24px 16px !important;
    min-height: 158px;
  }
}
    
/* à¸¥à¸” offset à¸¥à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸ à¸²à¸žà¸£à¸§à¸¡à¸”à¸¹à¹€à¸•à¸µà¹‰à¸¢à¹à¸¥à¸°à¹‚à¸›à¸£à¹ˆà¸‡à¸‚à¸¶à¹‰à¸™ */
body.category .cat-item > *:not(img){ transform: translateY(8px); transition: transform .25s ease; }
body.category .cat-item:hover > *:not(img){ transform: translateY(6px); }

/* âœ… à¹€à¸‡à¸² hover */
body.category .cat-item:hover,
body.category .cat-item:focus {
  background:#f0fdf4;                                /* à¸žà¸·à¹‰à¸™à¹€à¸‚à¸µà¸¢à¸§à¸­à¹ˆà¸­à¸™ */
  border-color:var(--emerald-700) !important;         /* à¸‚à¸­à¸šà¹€à¸‚à¸µà¸¢à¸§à¹€à¸‚à¹‰à¸¡ */
  box-shadow:0 10px 22px rgba(0,0,0,.06);             /* à¹€à¸‡à¸²à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸š prod-card */
  transform:translateY(-1px);                         /* à¸¢à¸à¸‚à¸¶à¹‰à¸™à¸™à¸´à¸”à¹€à¸”à¸µà¸¢à¸§ */
}

/* âœ… à¹„à¸­à¸„à¸­à¸™ â€” à¸­à¸¢à¸¹à¹ˆà¸™à¸´à¹ˆà¸‡à¸•à¸¥à¸­à¸” */
body.category .cat-item img {
  width: 60px;
  height: 60px;
  margin: 0 !important;
  object-fit: contain;
  display: block;
  transform: translateY(-4px);
}
    
/* âœ… à¹ƒà¸«à¹‰à¸à¸¥à¹ˆà¸­à¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸­à¸¢à¸¹à¹ˆà¸•à¸£à¸‡à¸à¸¥à¸²à¸‡à¹à¸™à¸§à¸•à¸±à¹‰à¸‡à¸žà¸­à¸”à¸µ à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ scroll */
body.category .green-shell {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;   /* à¸ˆà¸²à¸ center -> flex-start */
  min-height: 100vh;
}
/* Mobile: à¸¢à¹ˆà¸­à¹‚à¸¥à¹‚à¸à¹‰à¹à¸¥à¸°à¸‚à¸¢à¸±à¸šà¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¸—à¸±à¸šà¸«à¸±à¸§à¸‚à¹‰à¸­ */
@media (max-width: 480px){
  :root{ --logo-h:18px; }                 /* à¸ˆà¸²à¸ 32px â†’ 22px */
  .logo-box{
    top:8px; right:10px;                   /* à¸‚à¸¢à¸±à¸šà¸Šà¸´à¸”à¸¡à¸¸à¸¡à¸¡à¸²à¸à¸‚à¸¶à¹‰à¸™ */
    padding:3px 6px; border-radius:10px;
  }
  .hero-title{ font-size:1.35rem; }        /* à¸«à¸±à¸§à¸‚à¹‰à¸­à¹€à¸¥à¹‡à¸à¸¥à¸‡à¸™à¸´à¸”à¹ƒà¸«à¹‰à¹‚à¸›à¸£à¹ˆà¸‡ */
  .hero-sub{   font-size:.8rem; letter-spacing:.12rem; }

  /* à¸–à¹‰à¸²à¸«à¸™à¹‰à¸²à¸¢à¸±à¸‡à¹à¸™à¹ˆà¸™ à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸¥à¸·à¸­à¸à¸‹à¹ˆà¸­à¸™à¹‚à¸¥à¹‚à¸à¹‰à¹€à¸‰à¸žà¸²à¸°à¸¡à¸·à¸­à¸–à¸·à¸­à¹„à¸”à¹‰ (à¹€à¸­à¸²à¸„à¸­à¸¡à¹€à¸¡à¸™à¸•à¹Œà¸­à¸­à¸à¹„à¸”à¹‰) */
  /* .logo-box{ display:none !important; } */
}
body, html {
  margin: 0;
  padding: 0;
}
    /* âœ… Summary hero full-bleed à¹€à¸«à¸¡à¸·à¸­à¸™ Category/Products */
body.summary .hero{
  width: 100dvw !important;
  max-width: 100dvw !important;
  margin-left: calc(50% - 50dvw) !important;
  margin-right: calc(50% - 50dvw) !important;
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

/* âœ… Summary header box (à¸à¸£à¸­à¸šà¸«à¸±à¸§à¸ªà¸µà¸‚à¸²à¸§) â€“ à¹€à¸—à¸¡à¹€à¸žà¸¥à¸•à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸š products/category */
.summary-header-box{
  background:#ffffff;
  width: 100dvw !important;
  max-width: 100dvw !important;
  margin-left: calc(50% - 50dvw) !important;
  margin-right: calc(50% - 50dvw) !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  padding: 8px 12px !important;
  margin-bottom: 24px !important;
  text-align:center;
  position: relative; /* à¹€à¸œà¸·à¹ˆà¸­à¸¡à¸µà¸§à¸±à¸™/à¹€à¸§à¸¥à¸² à¸¡à¸¸à¸¡à¸‚à¸§à¸² */
}
    /* à¹€à¸žà¸´à¹ˆà¸¡à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸”à¹‰à¸²à¸™à¸šà¸™à¸‚à¸­à¸‡à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¹ƒà¸™à¸«à¸™à¹‰à¸² Summary */
body.summary .panel .panel-body{
  padding-top: 12px !important;   /* â¬…ï¸ à¸à¸±à¸™à¸à¸£à¸“à¸µ margin-collapse */
}
    
.summary-header-box h2{
  margin:0;
  font-size:1.25rem;
  font-weight:700;
  color:#065f46;
}
.summary-header-box p{
  margin-top:4px;
  font-size:0.95rem;
  font-weight:400;
  color:#475569;
}
/* à¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸ªà¸³à¸«à¸£à¸±à¸šà¸§à¸±à¸™/à¹€à¸§à¸¥à¸² (à¸–à¹‰à¸²à¹ƒà¸Šà¹‰) */
.summary-header-meta{
  position:absolute;
  right:12px;
  top:10px;
  text-align:right;
  line-height:1.1;
}
.summary-header-meta .date{ font-size:.9rem; color:#6b7280; }
.summary-header-meta .time{ font-size:.8rem; color:#9ca3af; }

/* âœ… à¸à¸²à¸£à¹Œà¸”à¸ à¸²à¸¢à¹ƒà¸™ Summary à¹ƒà¸«à¹‰à¸„à¸¸à¸¡à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡à¹€à¸«à¸¡à¸·à¸­à¸™ Products */
body.summary .panel{
  width:min(1200px,92vw);
  margin:0 auto;
  background:#f3f4f6 !important;
  border:0 !important;
  border-radius:0 !important;
  box-shadow:none !important;
}

/* à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰à¸«à¸±à¸§ panel à¹€à¸”à¸´à¸¡à¹à¸¥à¹‰à¸§ (à¹€à¸£à¸²à¸¢à¹‰à¸²à¸¢à¹„à¸› header box) */
body.summary .panel-head{ display:none !important; }

html, body { overflow-x: hidden; overflow-y:auto; }

/* à¸à¸±à¸™à¹€à¸„à¸ªà¸ªà¸¹à¸‡à¸„à¸‡à¸—à¸µà¹ˆà¸ˆà¸²à¸ height:100% à¹ƒà¸™à¸šà¸²à¸‡à¸«à¸™à¹‰à¸² â†’ à¹ƒà¸«à¹‰à¸«à¸™à¹‰à¸² Category à¸ªà¸¹à¸‡à¸•à¸²à¸¡à¹€à¸™à¸·à¹‰à¸­à¸«à¸² */
html.category, body.category{
  height:auto !important;
  min-height:100% !important;
}
    #summaryFooter .label{ color:#4b5563; }   /* = text-gray-600 à¸›à¸£à¸°à¸¡à¸²à¸“à¸™à¸±à¹‰à¸™ */
#summaryFooter .val{ color:#059669; }
    
 /* ===== Summary: section cards + divider + titled header ===== */
body.summary .info-card{
  background:#ffffff;
  border:1px solid #e5e7eb;
  border-radius:14px;
  box-shadow:0 2px 6px rgba(0,0,0,.04);
  padding:18px 16px;
  margin-bottom:16px;            /* à¸£à¸°à¸¢à¸°à¸«à¹ˆà¸²à¸‡à¸à¸²à¸£à¹Œà¸”à¸•à¹ˆà¸­à¸à¸²à¸£à¹Œà¸” */
}

@media (min-width:768px){
  body.summary .info-card{ padding:22px 20px; }
}

/* à¹€à¸ªà¹‰à¸™à¸„à¸±à¹ˆà¸™à¸šà¸²à¸‡ à¹† à¹ƒà¸•à¹‰à¸«à¸±à¸§à¸‚à¹‰à¸­à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸°à¸à¸²à¸£à¹Œà¸” */
body.summary .section-divider{
  border-bottom:1px solid #e5e7eb;
  margin:8px 0 14px;
}

/* à¸«à¸±à¸§à¸‚à¹‰à¸­à¸¡à¸µà¸­à¸µà¹‚à¸¡à¸ˆà¸´: à¸Šà¹ˆà¸§à¸¢à¹‚à¸Ÿà¸à¸±à¸ªà¸ªà¸²à¸¢à¸•à¸² */
body.summary .section-title{
  display:flex; align-items:center; gap:.5rem;
  font-weight:800; color:#065f46;   /* emerald-800 */
  font-size:1.125rem;               /* ~18px à¸šà¸™à¸¡à¸·à¸­à¸–à¸·à¸­ */
}
@media (min-width:768px){
  body.summary .section-title{ font-size:1.25rem; }  /* ~20px à¸šà¸™à¹€à¸”à¸ªà¸à¹Œà¸—à¹‡à¸­à¸› */
}

/* à¸›à¸£à¸±à¸šà¸à¸£à¸´à¸”à¸Ÿà¸´à¸¥à¸”à¹Œà¹ƒà¸«à¹‰à¸à¸£à¸°à¸Šà¸±à¸šà¸‚à¸¶à¹‰à¸™à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¹ƒà¸™ card */
body.summary .info-card .form-grid{ gap:12px !important; }   
    
 /* ===== Form Labels: à¹ƒà¸«à¹‰à¸«à¸±à¸§à¸‚à¹‰à¸­à¹€à¸‚à¹‰à¸¡à¸‚à¸¶à¹‰à¸™ ===== */
body.summary .form-label {
  color: #000000 !important;     /* à¸—à¸³à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸ªà¸µà¸”à¸³ */
  font-weight: 700 !important;   /* à¸«à¸™à¸²à¸à¸§à¹ˆà¸²à¸›à¸à¸•à¸´ */
}   

/* ================== CATEGORY PAGE ONLY (70% SCALE) ================== */
/* à¸¥à¸”à¸‚à¸™à¸²à¸”à¹€à¸‰à¸žà¸²à¸°à¸«à¸™à¹‰à¸²à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ */
body.category .category-header-box,
body.category .panel-body{
  font-size: 0.7em !important;
  line-height: 1.4 !important;
}

/* à¸à¸¥à¹ˆà¸­à¸‡à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ */
body.category .cat-item{
  padding: 14px 10px !important;     /* à¹€à¸”à¸´à¸¡ ~24px 16px â†’ à¸¥à¸”à¸¥à¸‡à¹€à¸«à¸¥à¸·à¸­ ~70% */
  min-height: 110px !important;      /* à¹€à¸”à¸´à¸¡ 158px â†’ 70% */
}

/* à¹„à¸­à¸„à¸­à¸™à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ */
body.category .cat-item img.cat-icon,
body.category .cat-icon{
  width: 42px !important;            /* à¹€à¸”à¸´à¸¡ 60px â†’ 70% */
  height: 42px !important;
}

/* à¸Šà¸·à¹ˆà¸­à¸«à¸¡à¸§à¸”à¹à¸¥à¸°à¸ˆà¸³à¸™à¸§à¸™à¸£à¸²à¸¢à¸à¸²à¸£ */
body.category .cat-title{
  font-size: 0.75rem !important;     /* à¹€à¸”à¸´à¸¡ ~1.05rem â†’ ~70% */
  font-weight: 700 !important;
}
body.category .cat-count{
  font-size: 0.62rem !important;     /* à¹€à¸”à¸´à¸¡ .875rem â†’ ~70% */
  font-weight: 400 !important;
}

/* à¸›à¸¸à¹ˆà¸¡ "à¸à¸¥à¸±à¸š" à¹ƒà¸«à¹‰à¹€à¸¥à¹‡à¸à¸¥à¸‡à¸•à¸²à¸¡ */
body.category .back-btn{
  transform: scale(.7);
  transform-origin: bottom right;
}

/* ===== BU Admin card: à¹ƒà¸«à¹‰à¸Ÿà¸´à¸¥à¸”à¹Œà¹€à¸£à¸µà¸¢à¸‡à¸—à¸µà¸¥à¸°à¸šà¸£à¸£à¸—à¸±à¸” (à¸Šà¸™à¸° global !important) ===== */
body.summary .info-card.bu-admin .form-grid{
  grid-template-columns: 1fr !important;
}

/* à¹€à¸œà¸·à¹ˆà¸­à¸šà¸²à¸‡à¸ˆà¸­à¸¡à¸µ override à¹€à¸žà¸´à¹ˆà¸¡ à¹ƒà¸«à¹‰à¸šà¸±à¸‡à¸„à¸±à¸šà¸—à¸¸à¸à¸«à¸™à¹‰à¸²à¸ˆà¸­ */
@media (min-width: 1024px){
  body.summary .info-card.bu-admin .form-grid{
    grid-template-columns: 1fr !important;
  }
}
/* ===== BU Admin vertical layout ===== */
.bu-admin .form-vertical {
  display: flex;
  flex-direction: column;
  gap: 1rem; /* à¸£à¸°à¸¢à¸°à¸«à¹ˆà¸²à¸‡à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸Ÿà¸´à¸¥à¸”à¹Œ */
}

/* à¸à¸¥à¹ˆà¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¹‰à¸”à¸¹à¹€à¸«à¸¡à¸·à¸­à¸™ input */
.bu-admin .input-box {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  padding: 0.5rem 0.75rem;
  min-height: 2.25rem;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.03);
}
/* ===== à¸›à¸£à¸±à¸šà¸‚à¸™à¸²à¸”à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£à¸«à¸±à¸§à¸‚à¹‰à¸­à¹ƒà¸™à¸à¸£à¸­à¸š ===== */
.section-title {
  font-size: 1.15rem !important;   /* à¹€à¸”à¸´à¸¡à¸›à¸£à¸°à¸¡à¸²à¸“ 1rem â†’ à¹€à¸žà¸´à¹ˆà¸¡à¸‚à¸¶à¹‰à¸™ */
  font-weight: 700;
}

/* ===== à¸›à¸£à¸±à¸šà¸‚à¸™à¸²à¸”à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸™à¸à¸¥à¹ˆà¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ ===== */
.form-value {
  font-size: 1rem !important;      /* à¹€à¸”à¸´à¸¡ ~0.875rem â†’ à¹€à¸žà¸´à¹ˆà¸¡à¸‚à¸¶à¹‰à¸™ */
  font-weight: 500;
  color: #111827;                  /* à¸ªà¸µà¹€à¸—à¸²à¹€à¸‚à¹‰à¸¡ à¸­à¹ˆà¸²à¸™à¸‡à¹ˆà¸²à¸¢ */
}

/* ===== à¸›à¸£à¸±à¸š label à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸°à¸Ÿà¸´à¸¥à¸”à¹Œà¹ƒà¸«à¹‰à¹ƒà¸«à¸à¹ˆà¸‚à¸¶à¹‰à¸™à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ ===== */
.form-label {
  font-size: 0.95rem !important;
  font-weight: 600;
  color: #374151;
}

/* ===== à¸›à¸£à¸±à¸šà¸‚à¸™à¸²à¸”à¸à¸¥à¹ˆà¸­à¸‡ input-box (à¹€à¸‰à¸žà¸²à¸° BU Admin) à¹ƒà¸«à¹‰à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™à¸™à¸´à¸”à¸«à¸™à¹ˆà¸­à¸¢ ===== */
.input-box {
  padding: 0.65rem 0.9rem !important; /* à¹€à¸”à¸´à¸¡ ~0.5rem â†’ à¹€à¸žà¸´à¹ˆà¸¡à¹ƒà¸«à¹‰à¸”à¸¹à¸ªà¸¡à¸”à¸¸à¸¥ */
  font-size: 1rem !important;
}
/* ===== à¸›à¸£à¸±à¸šà¸‚à¸™à¸²à¸”à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£à¹ƒà¸™à¸à¸£à¸­à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ à¹ƒà¸«à¹‰à¹€à¸—à¹ˆà¸²à¸à¸±à¸šà¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¹€à¸šà¸´à¸ ===== */

/* à¸«à¸±à¸§à¸‚à¹‰à¸­à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸°à¸à¸£à¸­à¸š à¹€à¸Šà¹ˆà¸™ "à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹€à¸šà¸´à¸", "à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ BU Admin" */
.section-title {
  font-size: 1.125rem !important;   /* text-lg */
  font-weight: 700;
  color: #065f46;                   /* à¹€à¸‚à¸µà¸¢à¸§à¹€à¸‚à¹‰à¸¡à¸•à¸²à¸¡à¸˜à¸µà¸¡ BJC Big C */
}

/* à¸›à¹‰à¸²à¸¢ label à¹€à¸Šà¹ˆà¸™ "Company", "Cost Center" */
.form-label {
  font-size: 1rem !important;       /* text-base */
  font-weight: 600;
  color: #374151;                   /* à¹€à¸—à¸²à¹€à¸‚à¹‰à¸¡ à¸­à¹ˆà¸²à¸™à¸‡à¹ˆà¸²à¸¢ */
}

.form-value,
.form-value.input-box {
  font-size: 1rem !important;       /* à¹€à¸—à¹ˆà¸²à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¹€à¸šà¸´à¸ */
  font-weight: 400;
  color: #111827;                   /* à¸ªà¸µà¹€à¸—à¸²à¹€à¸‚à¹‰à¸¡ */
}

/* à¹€à¸‰à¸žà¸²à¸°à¸à¸¥à¹ˆà¸­à¸‡ input-box (BU Admin) à¹€à¸žà¸´à¹ˆà¸¡ padding à¹ƒà¸«à¹‰à¸”à¸¹à¸ªà¸¡à¸”à¸¸à¸¥ */
.input-box {
  padding: 0.65rem 0.9rem !important;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  background: #fff;
}
    /* ===== BU Head ===== */
.info-card.bu-head {
  margin-top: 1.5rem; /* à¸£à¸°à¸¢à¸°à¸«à¹ˆà¸²à¸‡à¸ˆà¸²à¸ BU Admin */
}

/* à¹ƒà¸«à¹‰à¸ªà¸­à¸‡à¸à¸¥à¹ˆà¸­à¸‡à¸­à¸¢à¸¹à¹ˆà¹à¸™à¸§à¸™à¸­à¸™à¹€à¸«à¸¡à¸·à¸­à¸™ Employee Info */
.info-card.bu-head .form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr; /* 2 à¸à¸¥à¹ˆà¸­à¸‡à¹à¸™à¸§à¸™à¸­à¸™ */
  gap: 1rem;
}

/* à¸›à¸£à¸±à¸šà¸‚à¸™à¸²à¸”à¸Ÿà¸­à¸™à¸•à¹Œà¹à¸¥à¸°à¸ªà¹„à¸•à¸¥à¹Œà¹ƒà¸«à¹‰à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡ */
.info-card.bu-head .form-label {
  font-size: 1rem;
  font-weight: 600;
  color: #374151;
}

.info-card.bu-head .form-value {
  font-size: 1.05rem;
  font-weight: 500;
  color: #111827;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  padding: 0.65rem 0.9rem;
}

    /* ===== BU Head à¸à¸¥à¹ˆà¸­à¸‡à¹ƒà¸«à¸à¹ˆ à¹à¸šà¹ˆà¸‡à¸‹à¹‰à¸²à¸¢à¸‚à¸§à¸² ===== */
.info-card.bu-head {
  margin-top: 1.5rem; /* à¹€à¸§à¹‰à¸™à¸ˆà¸²à¸ BU Admin */
}

/* à¹à¸šà¹ˆà¸‡à¸ à¸²à¸¢à¹ƒà¸™à¸à¸¥à¹ˆà¸­à¸‡à¹€à¸›à¹‡à¸™ 2 à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ (à¸‹à¹‰à¸²à¸¢/à¸‚à¸§à¸²) */
.info-card.bu-head .form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

/* label à¹à¸¥à¸°à¸à¸¥à¹ˆà¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ */
.info-card.bu-head .form-label {
  font-size: 1rem;
  font-weight: 600;
  color: #374151;
  display: block;
  margin-bottom: 0.25rem;
}

.info-card.bu-head .input-box {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  padding: 0.65rem 0.9rem;
  font-size: 1.05rem;
  font-weight: 500;
  color: #111827;
  width: 100%;
}

/* à¸ªà¸³à¸«à¸£à¸±à¸šà¸ˆà¸­à¸¡à¸·à¸­à¸–à¸·à¸­à¹ƒà¸«à¹‰à¸‹à¹‰à¸­à¸™à¸¥à¸‡à¸¡à¸² */
@media (max-width: 768px) {
  .info-card.bu-head .form-grid {
    grid-template-columns: 1fr;
  }
}
    /* à¹ƒà¸«à¹‰ <select> à¹à¸¥à¸° <input> à¸”à¸¹à¹€à¸«à¸¡à¸·à¸­à¸™ .form-value */
#s_head_name_sel,
#s_head_email_inp{
  appearance: none;        /* à¹ƒà¸«à¹‰à¸«à¸™à¹‰à¸²à¸•à¸²à¹€à¸£à¸µà¸¢à¸š */
  background:#fff !important;
  border:1px solid #e5e7eb !important;
  border-radius:0.5rem !important;
  padding:0.65rem 0.9rem !important;
  font-size:1rem !important;
  font-weight:500 !important;
  color:#111827 !important;
  width:100%;
}
.hidden{ display:none !important; }
    
    /* à¸›à¸£à¸±à¸šà¹€à¸‰à¸žà¸²à¸° label: BU Admin Name à¹ƒà¸«à¹‰à¹„à¸¡à¹ˆà¸«à¸™à¸² */
label[for="s_admin_name"],
#summaryContent label[for="s_admin_name"],
.form-field label:has(+ #s_admin_name) {
  font-weight: 400 !important;
}
/* à¹ƒà¸«à¹‰ label à¹ƒà¸™à¸à¸¥à¸¸à¹ˆà¸¡ BU Admin à¸—à¸±à¹‰à¸‡à¸„à¸¹à¹ˆà¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¸›à¸à¸•à¸´ */
#buAdminCard .form-label {
  font-weight: 400 !important;
}
    
/* === à¸—à¸³à¹ƒà¸«à¹‰à¸«à¸±à¸§à¸‚à¹‰à¸­ BU Admin à¸«à¸™à¸²à¹€à¸—à¹ˆà¸²à¸à¸±à¸š Company / Cost Center === */
#summaryContent #buAdminCard .form-field > label,
.info-card.bu-admin .form-field > label,
label[for="s_bu_name"],
label[for="s_bu_email"] {
  font-weight: 700 !important;  /* à¸«à¸™à¸²à¹€à¸—à¹ˆà¸²à¸«à¸±à¸§à¸‚à¹‰à¸­ Company / Cost Center */
}
    
/* à¹ƒà¸«à¹‰à¸‚à¸™à¸²à¸”à¹à¸¥à¸°à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£à¹ƒà¸™à¸à¸£à¸­à¸š BU Head à¹€à¸—à¹ˆà¸²à¸à¸±à¸š BU Admin */
#buHeadCard .form-value {
  font-size: 1rem;      /* à¹€à¸—à¹ˆà¸²à¸à¸±à¸š text-base */
  font-weight: 500;     /* à¹€à¸—à¹ˆà¸²à¸à¸±à¸š font-medium */
  color: #1e293b;       /* à¹€à¸—à¹ˆà¸²à¸à¸±à¸š text-slate-800 */
}


    

  </style>
</head>

<body>
  
  <div class="page-container centered" id="pageContainer">
    <div class="content-card text-center" id="mainCard">
      <!-- à¹ƒà¸Šà¹‰à¹‚à¸¥à¹‚à¸à¹‰à¸šà¸™ App Bar à¹à¸¥à¹‰à¸§ à¸ˆà¸¶à¸‡à¸‹à¹ˆà¸­à¸™à¸•à¸±à¸§à¸™à¸µà¹‰ -->
<!-- <img ... class="corner-logo ..."> -->

      <!-- Cart Floating Button -->
      <button id="cartFab" class="cart-btn" onclick="openCart()" aria-label="à¹€à¸›à¸´à¸”à¸•à¸°à¸à¸£à¹‰à¸²">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 3h2l.4 2M7 13h9l3-8H6.4M7 13L5.4 5M7 13l-2 6h13M10 21a1 1 0 110-2 1 1 0 010 2zm7 0a1 1 0 110-2 1 1 0 010 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span id="cartBadge" class="cart-badge" style="display:none">0</span>
      </button>
       <div id="verifyContent" class="hidden flex justify-center items-center min-h-[80vh]">
  <div class="verify-box">
    <div class="verify-logo">
  <img
    src="https://i.postimg.cc/B6wpk3yh/cropped-Logo-BJC-Big-C-2021-2048x606.png"
    alt="BJC Big C"
    class="verify-logo-img"
    decoding="async"
    loading="lazy"
    onerror="this.onerror=null;this.src='https://via.placeholder.com/240x60?text=%20';"
  />
</div>

    <h1 class="verify-title">BJC Big C STATIONERY STORE</h1>
<p class="verify-subtitle">
  <span class="verify-badge" aria-hidden="true">ðŸ¢</span>
  à¸£à¸°à¸šà¸šà¹€à¸šà¸´à¸à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¸ªà¸³à¸™à¸±à¸à¸‡à¸²à¸™
</p>


<p class="verify-desc text-left">à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸žà¸™à¸±à¸à¸‡à¸²à¸™à¹€à¸žà¸·à¹ˆà¸­à¹€à¸‚à¹‰à¸²à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¸°à¸šà¸š</p>

    <label for="employeeId" class="sr-only">à¸£à¸«à¸±à¸ªà¸žà¸™à¸±à¸à¸‡à¸²à¸™</label>

<div class="input-wrapper">
  <img src="https://i.postimg.cc/4NKdMhvp/id-card.png" alt="badge" class="input-icon" />
  <input id="employeeId" type="text" placeholder="à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸žà¸™à¸±à¸à¸‡à¸²à¸™" class="verify-input" />
</div>

    <div id="message" aria-live="polite" class="hidden mt-4 p-4 rounded-lg text-center"></div>

    <button id="verifyBtn" type="button" class="verify-button" onclick="verifyEmployee()">à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™</button>
  </div>
</div>
      
      <!-- ============ Categories ============ -->
      <div id="categoryContent" class="hidden text-left">
        <div class="green-shell">
          <div class="category-inner">
            <div class="hero">
              <div class="logo-box">
                <img src="https://i.postimg.cc/B6wpk3yh/cropped-Logo-BJC-Big-C-2021-2048x606.png" alt="BJC Big C" onerror="this.style.display='none'"/>
              </div>
              <h1 class="hero-title">BJC Big C</h1>
              <div class="hero-sub">STATIONERY&nbsp;STORE</div>
              <div class="hero-dots"><span></span><span class="dim"></span><span class="dim"></span></div>
            </div>

            <div class="category-header-box">
  <h2 class="text-emerald-800 font-bold text-xl">à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸­à¸¸à¸›à¸à¸£à¸“à¹Œ</h2>
  <p class="text-gray-600">à¸„à¸¥à¸´à¸à¹€à¸žà¸·à¹ˆà¸­à¹€à¸¥à¸·à¸­à¸à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹€à¸šà¸´à¸</p>
</div>
              <div class="panel-body">
                <div id="categoryGrid" class="grid grid-cols-1 gap-4"></div>
              </div>

              <button class="back-btn" onclick="backToVerifyProceed()">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/></svg>
                à¸à¸¥à¸±à¸š
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ============ Products (à¹ƒà¸«à¸¡à¹ˆ) ============ -->
      <div id="productsContent" class="hidden text-left">
        <div class="green-shell">
          <div class="products-inner">
  <div class="hero">
    <div class="logo-box">
      <img src="https://i.postimg.cc/B6wpk3yh/cropped-Logo-BJC-Big-C-2021-2048x606.png" alt="BJC Big C" onerror="this.style.display='none'"/>
    </div>
    <h1 class="hero-title" id="prodHeroTitle">à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²</h1>
    <div class="hero-sub">STATIONERY&nbsp;STORE</div>
    <div class="hero-dots"><span class="dim"></span><span></span><span class="dim"></span></div>
  </div>

  <!-- âœ… à¸à¸£à¸­à¸šà¸«à¸±à¸§à¸ªà¸µà¸‚à¸²à¸§ (à¹€à¸«à¸¡à¸·à¸­à¸™ Category) -->
  <div class="products-header-box">
    <h2 class="text-emerald-800 font-bold text-xl" id="prodHeaderTitle">à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²</h2>
    <p class="text-gray-600" id="prodHeaderDesc">à¸„à¸¥à¸´à¸à¹€à¸žà¸·à¹ˆà¸­à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹à¸¥à¸°à¹€à¸¥à¸·à¸­à¸à¸ˆà¸³à¸™à¸§à¸™</p>
  </div>

  <div class="panel">
    <div class="panel-body">
      <div id="productGrid" class="grid grid-cols-1 gap-5"></div>
    </div>
    <button class="back-btn" onclick="backToCategories()">
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/></svg>
      à¸à¸¥à¸±à¸š
    </button>
  </div>
          </div>
        </div>
      </div>
<!-- ============ Summary (à¹ƒà¸«à¸¡à¹ˆ) ============ -->
  <div id="summaryContent" class="hidden text-left">
    <div class="green-shell">
      <div class="products-inner">
        <div class="hero">
          <div class="logo-box">
            <img src="https://i.postimg.cc/B6wpk3yh/cropped-Logo-BJC-Big-C-2021-2048x606.png" alt="BJC Big C" onerror="this.style.display='none'"/>
          </div>
          <h1 class="hero-title">à¸ªà¸£à¸¸à¸›à¸£à¸²à¸¢à¸à¸²à¸£à¹€à¸šà¸´à¸à¸­à¸¸à¸›à¸à¸£à¸“à¹Œ</h1>
          <div class="hero-sub">PLEASE REVIEW AND COMPLETE THE INFORMATION</div>
          <div class="hero-dots"><span class="dim"></span><span class="dim"></span><span></span></div>
        </div>
        
        <div class="summary-header-box">
  <h2>à¹ƒà¸šà¹€à¸šà¸´à¸à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¸ªà¸³à¸™à¸±à¸à¸‡à¸²à¸™</h2>
  <p>BJC Big C Stationery Request Form</p>
  <!-- à¸§à¸±à¸™/à¹€à¸§à¸¥à¸² à¸¡à¸¸à¸¡à¸‚à¸§à¸² (à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£ à¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¸šà¸¥à¹‡à¸­à¸à¸™à¸µà¹‰à¹„à¸”à¹‰) -->
  <div class="summary-header-meta">
    <div id="sumDate" class="date"></div>
    <div id="sumTime" class="time"></div>
  </div>
</div>
      <div class="panel">
          <div class="panel-body">

 <!-- à¸œà¸¹à¹‰à¹€à¸šà¸´à¸ + BU Admin (à¸ˆà¸±à¸”à¸§à¸²à¸‡à¸‚à¹‰à¸²à¸‡à¸à¸±à¸™à¸šà¸™à¹€à¸”à¸ªà¸à¹Œà¸—à¹‡à¸­à¸› / à¸‹à¹‰à¸­à¸™à¸šà¸™à¸¡à¸·à¸­à¸–à¸·à¸­) -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
  <!-- à¸œà¸¹à¹‰à¹€à¸šà¸´à¸ -->
  <section class="info-card">
    <h4 class="section-title">ðŸ§‘â€ðŸ’¼ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹€à¸šà¸´à¸ / Employee Information</h4>
    <div class="section-divider"></div>

    <!-- à¹à¸–à¸§à¸—à¸µà¹ˆ 1: Company / Cost Center -->
    <div class="form-grid mb-3">
      <div class="form-field">
        <label class="form-label">Company</label>
        <div id="s_company" class="form-value">-</div>
      </div>
      <div class="form-field">
        <label class="form-label">Cost Center</label>
        <div id="s_cost" class="form-value">-</div>
      </div>
    </div>

    <!-- à¹à¸–à¸§à¸—à¸µà¹ˆ 2: Employee ID / Full Name -->
    <div class="form-grid">
      <div class="form-field">
        <label class="form-label">Employee ID</label>
        <div id="s_empid" class="form-value">-</div>
      </div>
      <div class="form-field">
        <label class="form-label">Full Name</label>
        <div id="s_fullname" class="form-value">-</div>
      </div>
    </div>
  </section>

  <!-- BU Admin (à¸Ÿà¸´à¸¥à¸”à¹Œà¹€à¸£à¸µà¸¢à¸‡à¸—à¸µà¸¥à¸°à¸šà¸£à¸£à¸—à¸±à¸”) -->
  <section id="buAdminCard" class="info-card bu-admin">
  <h4 class="section-title">ðŸ¢ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ BU Admin</h4>
  <div class="section-divider"></div>

  <!-- à¸§à¸²à¸‡à¹€à¸£à¸µà¸¢à¸‡à¹à¸™à¸§à¸•à¸±à¹‰à¸‡ -->
  <div class="form-vertical">
    <!-- Name: à¹‚à¸«à¸¡à¸”à¹€à¸”à¸µà¸¢à¸§/à¸«à¸¥à¸²à¸¢à¸„à¸™ -->
    <div class="form-field">
      <label class="form-label">BU Admin Name</label>

      <!-- à¹‚à¸«à¸¡à¸”à¸„à¹ˆà¸²à¹€à¸”à¸µà¸¢à¸§ -->
      <div id="s_bu_name" class="form-value input-box">â€”</div>

      <!-- à¹‚à¸«à¸¡à¸”à¸«à¸¥à¸²à¸¢à¸„à¸™ (dropdown) -->
      <select id="s_bu_name_sel" class="form-value input-box hidden" aria-label="à¹€à¸¥à¸·à¸­à¸ BU Admin">
        <option value="">â€” à¹€à¸¥à¸·à¸­à¸ BU Admin â€”</option>
      </select>
    </div>

    <!-- Email: à¹‚à¸«à¸¡à¸”à¹€à¸”à¸µà¸¢à¸§/à¸«à¸¥à¸²à¸¢à¸„à¸™ -->
    <div class="form-field">
      <label class="form-label">BU Admin Email</label>

      <!-- à¹‚à¸«à¸¡à¸”à¸„à¹ˆà¸²à¹€à¸”à¸µà¸¢à¸§ -->
      <div id="s_bu_email" class="form-value input-box">â€”</div>

      <!-- à¹‚à¸«à¸¡à¸”à¸«à¸¥à¸²à¸¢à¸„à¸™ (input readonly à¹€à¸”à¹‰à¸‡à¸•à¸²à¸¡ name) -->
      <input id="s_bu_email_inp" type="email" class="form-value input-box hidden" readonly />
    </div>
  </div>
</section>
  </div>
  
<!-- BU Head (à¸Ÿà¸´à¸¥à¸”à¹Œà¸‹à¹‰à¸²à¸¢-à¸‚à¸§à¸² à¸ªà¸¥à¸±à¸šà¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸à¸±à¸™) -->
<section id="buHeadCard" class="info-card bu-head">
  <h4 class="section-title">ðŸ‘” à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ BU Head</h4>
  <div class="section-divider"></div>

  <!-- à¸›à¸£à¸±à¸šà¹€à¸›à¹‡à¸™ grid 2 à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ -->
  <div class="form-grid">
    <!-- à¸à¸±à¹ˆà¸‡à¸‹à¹‰à¸²à¸¢: BU Head Email -->
    <div class="form-field">
      <label class="form-label">BU Head Email</label>
      <div id="s_head_email" class="form-value input-box text-base font-medium text-slate-800">â€”</div>
      <input id="s_head_email_inp" type="email" class="form-value input-box hidden" readonly />
    </div>

    <!-- à¸à¸±à¹ˆà¸‡à¸‚à¸§à¸²: BU Head Name -->
    <div class="form-field">
      <label class="form-label">BU Head Name</label>
      <div id="s_head_name" class="form-value input-box text-base font-medium text-slate-800">â€”</div>
      <select id="s_head_name_sel" class="form-value input-box hidden" aria-label="à¹€à¸¥à¸·à¸­à¸ BU Head">
        <option value="">â€” à¹€à¸¥à¸·à¸­à¸ BU Head â€”</option>
      </select>
    </div>
  </div>
</section>
            
            <!-- à¸£à¸²à¸¢à¸à¸²à¸£ -->
            <div class="mb-6">
  <h4 class="section-title">ðŸ“¦ à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸šà¸´à¸ / Items Requested</h4>
  <div class="section-divider"></div>

              <div id="sumItems" class="mt-3"></div>

                
<!-- âœ… Summary footer: à¸ˆà¸±à¸”à¸à¸¥à¸²à¸‡à¸«à¸™à¹‰à¸²à¸ˆà¸­ -->
<div id="summaryFooter"
     class="mt-6 flex flex-wrap items-baseline justify-center gap-x-6 md:gap-x-10 gap-y-1 text-xl font-extrabold text-center">

  <!-- à¸à¸¥à¸¸à¹ˆà¸¡à¸—à¸µà¹ˆ 1: à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” -->
  <div class="flex items-baseline gap-2">
    <span class="text-gray-600">à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:</span>
    <span id="itemCount" class="text-emerald-600">0</span>
    <span class="text-gray-600">à¸£à¸²à¸¢à¸à¸²à¸£</span>
  </div>

  <!-- à¸•à¸±à¸§à¸„à¸±à¹ˆà¸™ (à¹€à¸‰à¸žà¸²à¸° desktop) -->
  <span class="hidden md:inline-block mx-1 text-gray-300 select-none">â€¢</span>

  <!-- à¸à¸¥à¸¸à¹ˆà¸¡à¸—à¸µà¹ˆ 2: à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” -->
  <div class="flex items-baseline gap-2">
    <span class="text-gray-600">à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:</span>
    <span id="sumTotal" class="text-emerald-600">à¸¿0</span>
  </div>
</div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
              <button class="py-3 rounded-xl bg-gray-700 hover:bg-gray-800 text-white font-bold" onclick="showPage('products')">à¹à¸à¹‰à¹„à¸‚à¸£à¸²à¸¢à¸à¸²à¸£</button>
              <button class="py-3 rounded-xl bg-emerald-700 hover:bg-emerald-800 text-white font-extrabold" onclick="submitRequest()">à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­à¹€à¸šà¸´à¸</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

 <!-- ============ Thank You (Template à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸šà¸«à¸™à¹‰à¸²à¸­à¸·à¹ˆà¸™) ============ -->
<div id="thankyouContent" class="hidden text-left">
  <div class="ty-wrap">
    <!-- à¹„à¸­à¸„à¸­à¸™à¸•à¸´à¹Šà¸ -->
    <div class="ty-check">
      <svg viewBox="0 0 24 24" width="40" height="40" fill="none">
        <circle cx="12" cy="12" r="11" stroke="white" stroke-width="2"></circle>
        <path d="M7 12.5l3 3 7-7" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
      </svg>
    </div>

    <h1 class="ty-title">ðŸŽ‰ Thank You!</h1>
    <div class="ty-sub">à¸à¸²à¸£à¹€à¸šà¸´à¸à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¸‚à¸­à¸‡à¸„à¸¸à¸“à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§</div>

    <!-- à¸à¸²à¸£à¹Œà¸”à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” -->
    <div class="ty-card">
      <h4>ðŸ“‹ à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸à¸²à¸£à¹€à¸šà¸´à¸</h4>
      <div class="ty-grid">
        <div class="ty-row">
          <div class="ty-label">à¸«à¸¡à¸²à¸¢à¹€à¸¥à¸‚à¸„à¸³à¸‚à¸­:</div>
          <div id="tyRef" class="ty-ref">#REQ-2024-001234</div>
        </div>
        <div class="ty-row">
          <div class="ty-label">à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸šà¸´à¸:</div>
          <div id="tyDate" class="ty-val">15 à¸¡à¸à¸£à¸²à¸„à¸¡ 2567</div>
        </div>
        <div class="ty-row">
          <div class="ty-label">à¸ˆà¸³à¸™à¸§à¸™à¸£à¸²à¸¢à¸à¸²à¸£:</div>
          <div id="tyQty" class="ty-val">5 à¸£à¸²à¸¢à¸à¸²à¸£</div>
        </div>
        <div class="ty-row">
          <div class="ty-label">à¸£à¸²à¸„à¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:</div>
          <div id="tyTotal" class="ty-total">à¸¿2,450.00</div>
        </div>
      </div>
    </div>

    <!-- à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸› -->
    <div class="ty-next">
  <div class="emoji">â°</div>
  <div class="title">à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸›</div>
  <div class="desc">
    à¸£à¸°à¸šà¸šà¸ˆà¸°à¸ªà¹ˆà¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸›à¸¢à¸±à¸‡à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸–à¸±à¸”à¹„à¸›<br>
    à¹€à¸žà¸·à¹ˆà¸­à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹à¸¥à¸°à¸ˆà¸±à¸”à¹€à¸•à¸£à¸µà¸¢à¸¡à¸­à¸¸à¸›à¸à¸£à¸“à¹Œ
  </div>
</div>

    <!-- à¸›à¸¸à¹ˆà¸¡à¸à¸¥à¸±à¸š -->
    <button class="ty-btn" onclick="goHomeFromThanks()"> à¸à¸¥à¸±à¸šà¸ªà¸¹à¹ˆà¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸</button>
    
    <div class="ty-divider"></div>  <!-- â† à¹€à¸ªà¹‰à¸™à¸„à¸±à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆ -->

    <!-- Footer à¸•à¸´à¸”à¸•à¹ˆà¸­ -->
    <div class="ty-footer">
      à¸«à¸²à¸à¸¡à¸µà¸„à¸³à¸–à¸²à¸¡à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡ à¸•à¸´à¸”à¸•à¹ˆà¸­
      <div class="row">
        <span>ðŸ“ž 02-123-4567</span>
        <span>âœ‰ï¸ supply@company.com</span>
      </div>
    </div>
  </div>
</div>

      <!-- ============ Blocked (à¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­) ============ -->
<div id="blockedContent" class="hidden text-left">
  <div class="blk-wrap">
    <div class="blk-card">
      <!-- à¸§à¸‡à¸à¸¥à¸¡à¸ªà¹‰à¸¡ + à¹„à¸­à¸„à¸­à¸™à¹€à¸•à¸·à¸­à¸™à¸ªà¸µà¸‚à¸²à¸§ -->
      <div class="blk-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M12 7v6" stroke="white" stroke-width="2.6" stroke-linecap="round"/>
          <circle cx="12" cy="16.5" r="1.3" fill="white"/>
        </svg>
      </div>

      <h1 class="blk-title">âš ï¸ à¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­</h1>
      <div class="blk-sub">Budget BU à¸‚à¸­à¸‡à¸—à¹ˆà¸²à¸™à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¹€à¸šà¸´à¸à¸„à¸£à¸±à¹‰à¸‡à¸™à¸µà¹‰</div>

      <!-- à¸à¸¥à¹ˆà¸­à¸‡à¸•à¸´à¸”à¸•à¹ˆà¸­ BU Admin -->
      <div class="blk-admin">
  <div class="blk-admin-title">à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡à¸•à¸´à¸”à¸•à¹ˆà¸­ BU Admin</div>
  <div class="blk-admin-name">ðŸ‘¨â€ðŸ’¼ <span id="blkName">â€”</span></div>
  <a id="blkEmail" href="#" class="blk-admin-email" rel="nofollow noopener">
    <span id="blkEmailText">ðŸ“§ Email BU Admin: â€”</span>
  </a>
</div>

      <!-- à¸›à¸¸à¹ˆà¸¡à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸ -->
<button class="blk-btn" onclick="goHomeFromBlocked()">
  à¸à¸¥à¸±à¸šà¸ªà¸¹à¹ˆà¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸
</button>
    </div>
  </div>
</div>

      
 </div> <!-- /content-card -->
  </div> <!-- /page-container -->


  <!-- Loading Modal -->
  <div id="checkingModal" class="hidden fixed inset-0 z-[9999] items-center justify-center bg-black/40">
    <div class="bg-white rounded-2xl shadow-2xl px-6 py-5 flex items-center gap-3">
      <svg class="w-6 h-6 animate-spin text-emerald-600" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
      </svg>
      <span class="text-gray-800 font-medium">à¸à¸³à¸¥à¸±à¸‡à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸£à¸«à¸±à¸ªà¸žà¸™à¸±à¸à¸‡à¸²à¸™â€¦</span>
    </div>
  </div>

  <!-- Loading Products Modal -->
  <div id="loadingProductsModal" class="hidden fixed inset-0 z-[9998] items-center justify-center bg-black/40">
    <div class="bg-white rounded-2xl shadow-2xl px-6 py-5 flex items-center gap-3">
      <svg class="w-6 h-6 animate-spin text-emerald-600" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
      </svg>
      <span class="text-gray-800 font-medium">à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²â€¦</span>
    </div>
  </div>

  <!-- Submitting Modal -->
<div id="submittingModal" class="hidden fixed inset-0 z-[9999] items-center justify-center bg-black/40">
  <div class="bg-white rounded-2xl shadow-2xl px-6 py-5 flex items-center gap-3">
    <svg class="w-6 h-6 animate-spin text-emerald-600" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
    </svg>
    <span class="text-gray-800 font-medium">à¸à¸³à¸¥à¸±à¸‡à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­à¹€à¸šà¸´à¸â€¦</span>
  </div>
</div>

  <!-- Product Detail Modal -->
  <div id="itemModal" class="modal-mask">
    <div class="modal">
      <div class="flex justify-center mb-3">
        <img id="mImg" class="w-36 h-36 object-contain" src="" alt=""
     onerror="this.src='https://via.placeholder.com/144?text=%20'"/>
      </div>
      <h3 id="mName" class="text-xl font-extrabold text-center text-gray-900"></h3>
      <p id="mDetail" class="text-sm text-center text-gray-600 mt-1"></p>
      <div class="text-center text-emerald-600 text-2xl font-extrabold my-3" id="mPrice"></div>

      <div class="text-center text-gray-700 mb-2">à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¸ˆà¸³à¸™à¸§à¸™</div>
      <div class="flex items-center justify-center gap-3 mb-4">
        <button class="qty-btn" onclick="chgQty(-1)">âˆ’</button>
        <input id="mQty" type="number" min="0" step="1" inputmode="numeric" pattern="\d*" value="1" class="w-20 text-center border border-gray-300 rounded-lg py-2" />
        <button class="qty-btn" onclick="chgQty(1)">+</button>
      </div>

      <div class="text-center mb-5">
        <span class="font-semibold">Price:</span>
        <span class="price-green" id="mTotal">à¸¿0</span>
      </div>

      <div class="grid grid-cols-2 gap-3">
        <button class="py-3 rounded-xl bg-gray-600 text-white font-bold" onclick="closeItemModal()">à¸¢à¸à¹€à¸¥à¸´à¸</button>
        <button class="py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-bold" onclick="confirmAdd()">à¹€à¸žà¸´à¹ˆà¸¡à¸¥à¸‡à¸•à¸°à¸à¸£à¹‰à¸²</button>
      </div>
    </div>
  </div>

  <script>
    /* ============ CONFIG ============ */
    const container = document.getElementById('pageContainer');
    const API_BASE = 'https://script.google.com/macros/s/AKfycbzMk3CWXyFN8VQUpLdNKHG5z5IUoKYTZO7XDCGFTj-oE-EC3m2sb156xlEAmFLEi0swyQ/exec';

   /* ============ STATE ============ */
let stage = 'verify';
let currentCompany = null;
let CATEGORIES = [];
let PRODUCTS = [];
let selectedCategory = '';
let modalItem = { name:'', price:0, detail:'', image:'' };
let LAST_SUBMIT = null;
let BU_HEAD_CHOICES = []; // [{name, email}, ...]
    
    // ===== Global guards (à¸Šà¹ˆà¸§à¸¢à¸ˆà¸±à¸š error à¸—à¸µà¹ˆà¸—à¸³à¹ƒà¸«à¹‰à¸ˆà¸­à¸‚à¸²à¸§) =====
window.addEventListener('error', (e) => {
  console.error('[GlobalError]', e.error || e.message);
  alert('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¸‚à¸“à¸°à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸«à¸™à¹‰à¸²: ' + (e.message || 'à¹„à¸¡à¹ˆà¸—à¸£à¸²à¸šà¸ªà¸²à¹€à¸«à¸•à¸¸'));
});
window.addEventListener('unhandledrejection', (e) => {
  console.error('[UnhandledRejection]', e.reason);
  alert('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¸ˆà¸²à¸à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­: ' + (e.reason?.message || 'à¹„à¸¡à¹ˆà¸—à¸£à¸²à¸šà¸ªà¸²à¹€à¸«à¸•à¸¸'));
});
    
    // ======== PAGE SWITCH HELPER ========
function showSection(targetId){
  const ids = [
    'verifyContent','categoryContent','productsContent',
    'summaryContent','thankyouContent','blockedContent'
  ];
  ids.forEach(id=>{
    const el = document.getElementById(id);
    if(!el) return;
    if(id === targetId){ el.classList.remove('hidden'); }
    else               { el.classList.add('hidden'); }
  });
}


/* ===== CART STATE ===== */
let CART = [];
let CURRENT_EMP = null;
let CURRENT_BU_ADMIN = { names: [], emails: [] };

    /* ===== NEW: Budget & Admin from Emp HO (K, L, M) ===== */
let CURRENT_BUDGET = null;  // à¸„à¹ˆà¸²à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ K (null/0/à¸•à¸±à¸§à¹€à¸¥à¸‚)
let CURRENT_ADMIN_CONTACT = { name: 'â€”', email: 'â€”' };
    
    /* ===== BU Head (state) ===== */
let CURRENT_BU_HEAD = { name: 'â€”', email: 'â€”' };

let FORCE_FRESH = false;
let inflight = { categories: null, items: null };

    function cartCount(){ return CART.reduce((s,it)=>s + (Number(it.qty)||0), 0); }
    function cartSum(){ return CART.reduce((s,it)=>s + (Number(it.qty)||0)*(Number(it.price)||0), 0); }
    function findItemKey(p){ return (p.name || '').trim().toLowerCase(); }

    function addToCart(p, qty){
      const key = findItemKey(p);
      const q = Math.max(0, Number(qty)||0);
      if(q===0) return;
      const i = CART.findIndex(it => it.key===key);
      if(i>-1){
        CART[i].qty += q;
      }else{
        CART.push({
          key,
          name: p.name || '-',
          price: Number(p.price) || 0,
          qty: q,
          image: p.image || '',
          detail: p.detail || '' // âœ… à¹€à¸à¹‡à¸šà¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” (à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ I)
        });
      }
      updateCartUI();
    }

    function removeFromCart(key){
      CART = CART.filter(it => it.key!==key);
      updateCartUI();
    }

    function updateCartUI(){
      const n = cartCount();
      const badge = document.getElementById('cartBadge');
      const badgeHdr = document.getElementById('cartBadgeHdr');
      const sumEl = document.getElementById('cartSum');
      const fab = document.getElementById('cartFab');

      const isAllowedPage = document.body.classList.contains('category') || document.body.classList.contains('products');
      if (fab) { fab.classList.toggle('show', n > 0 && isAllowedPage); }

      if(badge){ badge.style.display = n>0 ? 'flex' : 'none'; badge.textContent = n; }
      if(badgeHdr){ badgeHdr.textContent = n; }
      if(sumEl){ sumEl.textContent = baht(cartSum()); }
      renderCartItems();
    }

    function renderCartItems(){
      const wrap = document.getElementById('cartItems');
      if(!wrap) return;

      if(CART.length===0){
        wrap.innerHTML = `<div class="text-center text-gray-500 py-10">à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£</div>`;
        return;
      }

      wrap.innerHTML = CART.map(it=>{
        const line = baht((Number(it.price)||0) * (Number(it.qty)||0)); // à¸£à¸§à¸¡
        const unit = baht(Number(it.price)||0); // à¸£à¸²à¸„à¸²à¸•à¹ˆà¸­à¸«à¸™à¹ˆà¸§à¸¢
        const img = (it.image || '').replace(/"/g,'&quot;');
        const name = (it.name || '').replace(/</g,'&lt;').replace(/>/g,'&gt;');
        const desc = (it.detail|| '').replace(/</g,'&lt;').replace(/>/g,'&gt;');

        return `
          <div class="cart-item">
            <!-- à¸‹à¹‰à¸²à¸¢: à¸ à¸²à¸ž + à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ -->
            <div class="left">
              <img src="${img}" class="thumb" onerror="this.src='https://via.placeholder.com/40?text=%20'" alt="">
              <div class="info">
                <div class="name">${name}</div>
                ${desc ? `<span class="desc">${desc}</span>` : ``}
                <div class="meta">${unit} Ã— ${it.qty}</div>
              </div>
            </div>
            <!-- à¸‚à¸§à¸²: à¸£à¸²à¸„à¸²(à¸£à¸§à¸¡) à¸šà¸™ + à¸›à¸¸à¹ˆà¸¡à¸¥à¸š à¸¥à¹ˆà¸²à¸‡ -->
            <div class="right">
              <div class="line">${line}</div>
              <button class="remove"
  onclick="removeFromCart('${(it.key||"").replace(/'/g,"\\'")}')"
  aria-label="à¸¥à¸šà¸£à¸²à¸¢à¸à¸²à¸£à¸™à¸µà¹‰">à¸¥à¸š</button>
            </div>
          </div>
        `;
      }).join('');
    }

    function openCart(){
      document.getElementById('cartMask')?.classList.add('show');
      renderCartItems();
    }
    function closeCart(){
      document.getElementById('cartMask')?.classList.remove('show');
    }
    function proceedCart(){
      closeCart();
      showPage('summary'); // âœ… à¹„à¸›à¸«à¸™à¹‰à¸²à¹ƒà¸«à¸¡à¹ˆ
      renderSummary();     // âœ… à¹€à¸•à¸´à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸£à¸¸à¸›
    }

    /* ============ Utilities ============ */
    const baht = n => 'à¸¿' + Number(n || 0).toLocaleString('th-TH', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    function normalizeCompanyName(s=''){
      const t = String(s).toLowerCase();
      if (t.includes('big c') || t.includes('bigc')) return 'Big C';
      return 'BJC';
    }
    
// âœ… à¹ƒà¸Šà¹‰à¹à¸«à¸¥à¹ˆà¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ BU Admin à¹à¸šà¸šà¹ƒà¸«à¸¡à¹ˆ: à¹à¸¡à¸•à¸Šà¹Œ Emp HO!O â†” User_BJC_BigC!E à¹à¸¥à¹‰à¸§à¸„à¸·à¸™ H/I
// API (à¸à¸±à¹ˆà¸‡ Apps Script à¸•à¹‰à¸­à¸‡à¸—à¸³à¸‡à¸²à¸™à¸•à¸²à¸¡à¸™à¸µà¹‰): ?action=getBudgetAndAdmin&employeeId=XXXX
// âœ… à¸”à¸¶à¸‡ BU Admin à¹à¸¥à¸° (à¸–à¹‰à¸²à¸¡à¸µ) BU Head à¸ˆà¸²à¸ endpoint à¹€à¸”à¸´à¸¡
async function getBudgetAndAdmin(employeeId){
  try{
    const url = `${API_BASE}?action=getBudgetAndAdmin&employeeId=${encodeURIComponent(employeeId)}`;
    const { ok, json } = await fetchJSON(url, { timeout: 12000 }).catch(()=>({ok:false}));
    if(!ok || !json || json.success !== true) return null;

    const data = json.data ?? json;

    // BU Admin
    const adminName  = String(data.adminName  ?? data.name  ?? 'â€”').trim() || 'â€”';
    const adminEmail = String(data.adminEmail ?? data.email ?? 'â€”').trim() || 'â€”';

    // BU Head (à¸–à¹‰à¸² backend à¹ƒà¸ªà¹ˆà¸¡à¸²à¸”à¹‰à¸§à¸¢ à¸à¹‡à¸£à¸±à¸šà¹€à¸¥à¸¢)
    const headName   = String(data.headName   ?? data.buHeadName   ?? 'â€”').trim() || 'â€”';
    const headEmail  = String(data.headEmail  ?? data.buHeadEmail  ?? 'â€”').trim() || 'â€”';

    // budget (optional)
    const budgetRaw  = data.budget ?? data.k ?? data.K ?? data.budgetK ?? null;
    const budget     = (budgetRaw === null || budgetRaw === undefined) ? null : Number(budgetRaw);

    return { budget, adminName, adminEmail, headName, headEmail };
  }catch(e){
    console.warn('getBudgetAndAdmin failed', e);
    return null;
  }
}

// âœ… endpoint à¸ªà¸³à¸£à¸­à¸‡: à¸”à¸¶à¸‡ BU Head à¹à¸šà¸šà¸¢à¸·à¸”à¸«à¸¢à¸¸à¹ˆà¸™ (à¸£à¸­à¸‡à¸£à¸±à¸šà¸—à¸±à¹‰à¸‡ headList à¹à¸¥à¸° headName/headEmail à¹€à¸”à¸µà¹ˆà¸¢à¸§)
// **à¸ªà¸³à¸„à¸±à¸**: à¹ƒà¸Šà¹‰ action à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¸žà¸´à¸¡à¸žà¹Œà¹€à¸¥à¹‡à¸ "getbuhead" à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¹€à¸‚à¹‰à¸²à¸à¸±à¸š doGet à¸—à¸µà¹ˆ .toLowerCase() à¹„à¸§à¹‰
async function getBuHead(employeeId){
  try{
    const url = `${API_BASE}?action=getbuhead&employeeId=${encodeURIComponent(employeeId)}`;
    const { ok, json, text } = await fetchJSON(url, { timeout: 12000 }).catch(()=>({ok:false}));
    if(!ok || !json || json.success !== true) {
      console.warn('getBuHead response not ok:', {ok, json, text});
      return null;
    }
    const data = json.data ?? json;
    const list = Array.isArray(data.headList) ? data.headList : [];

    if (list.length > 0){
      return { headList: list };
    }

    const headName  = String(data.headName  ?? data.name  ?? 'â€”').trim() || 'â€”';
    const headEmail = String(data.headEmail ?? data.email ?? 'â€”').trim() || 'â€”';
    return { headName, headEmail };
  }catch(e){
    console.warn('getBuHead failed', e);
    return null;
  }
}
/** à¸¡à¸µà¸„à¹ˆà¸² (à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸‡) = à¸œà¹ˆà¸²à¸™à¹€à¸à¸“à¸‘à¹Œ (à¸™à¸±à¸šà¸£à¸§à¸¡ "0" à¸”à¹‰à¸§à¸¢à¸§à¹ˆà¸² "à¸¡à¸µà¸„à¹ˆà¸²" à¸•à¸²à¸¡à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸¥à¹ˆà¸²à¸ªà¸¸à¸”) */
function hasNonBlank(v){
  return !(v === null || v === undefined || String(v).trim() === '');
}

    // === fetch à¸Šà¸™à¸´à¸”à¸¡à¸µ timeout + à¸£à¸§à¸¡à¸à¸²à¸£à¹‚à¸¢à¸‡ signal à¸ à¸²à¸¢à¸™à¸­à¸ ===
async function fetchJSON(url, {method='GET', headers, body, timeout=12000, signal} = {}){
  const ctrl = new AbortController();
  const id   = setTimeout(()=>ctrl.abort('timeout'), timeout);

  // à¸£à¸§à¸¡à¸ªà¸±à¸à¸à¸²à¸“à¸¢à¸à¹€à¸¥à¸´à¸à¸ˆà¸²à¸à¸ à¸²à¸¢à¸™à¸­à¸ (à¸–à¹‰à¸²à¸¡à¸µ)
  const link = new AbortController();
  function forwardAbort(){ try{ link.abort(); }catch(_){} }
  ctrl.signal.addEventListener('abort', forwardAbort);
  if (signal) signal.addEventListener('abort', forwardAbort);

  try{
    const res  = await fetch(url, {method, headers, body, cache:'no-store', signal: link.signal});
    const text = await res.text();              // à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ body read à¸‹à¹‰à¸³
    let json   = null; try{ json = JSON.parse(text); }catch(_){}
    return { ok: res.ok, status: res.status, json, text };
  }finally{
    clearTimeout(id);
  }
}

    /* ====== Categories ====== */
    async function getCategories(company, limit = 50){
  const params = new URLSearchParams({
    action:'getCategories',
    company: company || 'BJC',
    limit: Math.min(Math.max(parseInt(limit) || 50, 1), 50),
    debug: FORCE_FRESH ? '1' : '0'
  });

  // à¸¢à¸à¹€à¸¥à¸´à¸à¸„à¸³à¸‚à¸­à¹€à¸à¹ˆà¸²
  inflight.categories?.abort();

  const ctrl = new AbortController();
  inflight.categories = ctrl;

  const timer = setTimeout(() => { try{ ctrl.abort('timeout'); }catch(_){} }, 15000);

  try{
    const res = await fetch(`${API_BASE}?${params.toString()}`, {
      method:'GET',
      cache:'no-store',
      signal: ctrl.signal
    });
    if(!res.ok) return [];
    const data = await res.json().catch(()=>null);
    return (data && data.success && Array.isArray(data.data)) ? data.data : [];
  }catch(_){
    return [];
  }finally{
    clearTimeout(timer);
  }
}
/* ===== CATEGORY ICONS ===== */
const CATEGORY_ICONS = {
  'à¹à¸Ÿà¹‰à¸¡à¹à¸¥à¸°à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¸›à¸£à¸°à¸à¸­à¸š': 'https://i.postimg.cc/XNHBgZPf/folder.png',
  'à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¸•à¸±à¸”': 'https://i.postimg.cc/cHDCTjFs/cut.png',
  'à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¹€à¸ˆà¸²à¸°': 'https://i.postimg.cc/QtV0dFn0/stapler.png',
  'à¸„à¸¥à¸´à¸›à¸«à¸™à¸µà¸šà¸à¸£à¸°à¸”à¸²à¸©': 'https://i.postimg.cc/nzvM7k5n/paper-clip.png',
  'à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸‚à¸µà¸¢à¸™': 'https://i.postimg.cc/8zXm7pQQ/stationery-1.png',
  'à¸ªà¸à¸­à¸•à¹€à¸—à¸›,à¸à¸²à¸§à¹à¸¥à¸°à¹‚à¸žà¸ªà¸­à¸´à¸—': 'https://i.postimg.cc/8cRyqq0Y/scotch-tape.png',
  'à¸–à¹ˆà¸²à¸™': 'https://i.postimg.cc/tRBnzrJs/power.png',
  'à¸‹à¸­à¸‡à¹€à¸­à¸à¸ªà¸²à¸£': 'https://i.postimg.cc/0NZ9qBL5/document.png',
  'à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¸—à¸³à¸„à¸§à¸²à¸¡à¸ªà¸°à¸­à¸²à¸”': 'https://i.postimg.cc/NG8vhVTz/basket.png',
  'à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸”à¸·à¹ˆà¸¡': 'https://i.postimg.cc/VL3hdWjq/instant-coffee.png',
  'à¸­à¸·à¹ˆà¸™à¹†': 'https://i.postimg.cc/wvLX4Dtv/box.png'
};
    
    function renderCategories(){
  const grid = document.getElementById('categoryGrid');
  if(!grid) return;

  if(!CATEGORIES || CATEGORIES.length === 0){
    grid.innerHTML = `<div class="col-span-2 text-center text-gray-500 py-6">à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸ˆà¸²à¸à¸£à¸°à¸šà¸šâ€¦</div>`;
    return;
  }

  grid.innerHTML = CATEGORIES.map(c => {
    const title = (c.title || '').trim();
    const icon  = CATEGORY_ICONS[title] || '';
    const img   = icon 
      ? `<img class="cat-icon" src="${icon}" alt="" loading="lazy" decoding="async" onerror="this.style.display='none'">`
      : '';

    return `
  <button class="cat-item" onclick="openCategory('${title.replace(/'/g, "\\'")}')">
    ${img}
    <div class="font-bold text-lg text-gray-900">${title}</div>
  </button>
    `;
  }).join('');
}

    let OPENING = false;
async function openCategory(name){
  if (OPENING) return;
  OPENING = true;
  selectedCategory = name;
  showLoadingProductsModal(true);
  try{
    await goProductsPage();
  }finally{
    showLoadingProductsModal(false);
    OPENING = false;
  }
}

    function showSubmittingModal(show=true){
  const m = document.getElementById('submittingModal');
  if(!m) return;
  if(show){ m.classList.remove('hidden'); m.classList.add('flex'); }
  else { m.classList.add('hidden'); m.classList.remove('flex'); }
}

   async function preloadCategoriesFor(company){
  try {
    // à¹ƒà¸Šà¹‰à¸•à¸±à¸§à¹‚à¸«à¸¥à¸” "à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²â€¦" à¹à¸—à¸™ à¹€à¸žà¸·à¹ˆà¸­à¹„à¸¡à¹ˆà¸ªà¸±à¸šà¸ªà¸™à¸§à¹ˆà¸²à¹€à¸›à¹‡à¸™à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­
    showLoadingProductsModal(true);

    currentCompany = normalizeCompanyName(company);
    CATEGORIES = await getCategories(currentCompany, 50);

    renderCategories();
    updateCartUI();
  } catch (err) {
    console.error('à¹‚à¸«à¸¥à¸”à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ:', err);
    showMsg('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹„à¸”à¹‰ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡','error');
  } finally {
    showLoadingProductsModal(false);
  }
}
    if (!window.__abortHookInstalled){
  window.addEventListener('beforeunload', () => {
    try { abortInflight(); } catch(_) {}
  });
  window.__abortHookInstalled = true;
}

    /* ====== Products ====== */
   async function getItems(company, category, limit=100){
  const params = new URLSearchParams({
    action: 'getItems',
    company,
    category,
    limit,
    debug: FORCE_FRESH ? '1' : '0'
  });

  // à¸¢à¸à¹€à¸¥à¸´à¸à¸„à¸³à¸‚à¸­à¹€à¸à¹ˆà¸²à¸—à¸µà¹ˆà¸¢à¸±à¸‡à¸„à¹‰à¸²à¸‡
  inflight.items?.abort();

  const ctrl = new AbortController();
  inflight.items = ctrl;

  // â±ï¸ timeout à¸à¸±à¸™à¸„à¹‰à¸²à¸‡ (15s)
  const timer = setTimeout(() => {
    try { ctrl.abort('timeout'); } catch(_) {}
  }, 15000);

  try{
    const res = await fetch(`${API_BASE}?${params.toString()}`, {
      method:'GET',
      cache:'no-store',
      signal: ctrl.signal
    });

    if(!res.ok) return [];
    const data = await res.json().catch(()=>null);
    return (data && data.success && Array.isArray(data.items)) ? data.items : [];
  } catch(_){
    // à¸–à¹‰à¸²à¸„à¹‰à¸²à¸‡/à¸«à¸¥à¸¸à¸” à¹ƒà¸«à¹‰à¸à¸¥à¸±à¸šà¹€à¸›à¹‡à¸™à¸¥à¸´à¸ªà¸•à¹Œà¸§à¹ˆà¸²à¸‡ à¹à¸•à¹ˆà¸­à¸¢à¹ˆà¸²à¹ƒà¸«à¹‰ UI à¸„à¹‰à¸²à¸‡
    return [];
  } finally{
    clearTimeout(timer);
  }
}

    async function goProductsPage(){
  const grid = document.getElementById('productGrid');
  PRODUCTS = [];
  if (grid) grid.innerHTML = `<div class="col-span-2 text-center text-gray-500 py-6">à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸´à¸™à¸„à¹‰à¸²â€¦</div>`;

  const items = await getItems(currentCompany || 'BJC', selectedCategory, 200);
  PRODUCTS = items;

  // âœ… à¸«à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¹€à¸ªà¸£à¹‡à¸ˆ â†’ à¸›à¸´à¸”à¹‚à¸«à¸¡à¸”à¹‚à¸«à¸¥à¸”à¸ªà¸” (à¹€à¸«à¸¥à¸·à¸­ cache à¸£à¸­à¸šà¸–à¸±à¸”à¹„à¸›à¹„à¸”à¹‰à¹€à¸¥à¸¢)
  FORCE_FRESH = false;

 document.getElementById('prodHeroTitle').textContent  = selectedCategory || 'à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²';
document.getElementById('prodHeaderTitle').textContent = selectedCategory ? `à¸«à¸¡à¸§à¸”: ${selectedCategory}` : 'à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²';
document.getElementById('prodHeaderDesc').textContent  = 'à¸„à¸¥à¸´à¸à¹€à¸žà¸·à¹ˆà¸­à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹à¸¥à¸°à¹€à¸¥à¸·à¸­à¸à¸ˆà¸³à¸™à¸§à¸™';

  renderProducts();
  showPage('products');
}

    function renderProducts(){
  const grid = document.getElementById('productGrid');
  if(!grid){ showLoadingProductsModal(false); return; }

  if(!PRODUCTS || PRODUCTS.length === 0){
    grid.innerHTML = `<div class="col-span-2 text-center text-gray-500 py-6">à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸à¸²à¸£à¹ƒà¸™à¸«à¸¡à¸§à¸”à¸™à¸µà¹‰</div>`;
    showLoadingProductsModal(false);
    return;
  }

  grid.innerHTML = PRODUCTS.map((p,idx) => `
    <button class="prod-card" onclick="openItem(${idx})">
      <img class="prod-img" src="${p.image || ''}" onerror="this.src='https://via.placeholder.com/112?text=%20'" alt="">
      <div class="font-bold text-gray-900 leading-snug">${p.name || '-'}</div>
      <div class="text-emerald-600 font-extrabold mt-1">${baht(p.price)}</div>
    </button>
  `).join('');

  // âœ… à¹€à¸œà¸·à¹ˆà¸­à¸„à¹ˆà¸² fetch à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¹à¸•à¹ˆ overlay à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸›à¸´à¸”
  showLoadingProductsModal(false);
}
    let __lp_timer = null;
function showLoadingProductsModal(show = true){
  const m = document.getElementById('loadingProductsModal');
  if(!m) return;

  // à¹€à¸„à¸¥à¸µà¸¢à¸£à¹Œ timer à¹€à¸à¹ˆà¸²à¸à¹ˆà¸­à¸™
  clearTimeout(__lp_timer);

  if(show){
    m.classList.remove('hidden');
    m.classList.add('flex');
    // Failsafe à¸›à¸´à¸”à¹€à¸­à¸‡à¹ƒà¸™ 20 à¸§à¸´à¸™à¸²à¸—à¸µ
    __lp_timer = setTimeout(()=> {
      try{
        m.classList.add('hidden');
        m.classList.remove('flex');
      }catch(_){}
    }, 20000);
  } else {
    m.classList.add('hidden');
    m.classList.remove('flex');
  }
}

    function backToCategories(){ showPage('category'); }

    /* ====== Modal ====== */
    const modalEl = document.getElementById('itemModal');
    const mImg = document.getElementById('mImg');
    const mName = document.getElementById('mName');
    const mDetail = document.getElementById('mDetail');
    const mPrice = document.getElementById('mPrice');
    const mQty = document.getElementById('mQty');
    const mTotal = document.getElementById('mTotal');

    function normalizeQty(val){
      const n = parseInt(String(val).replace(/[^\d]/g,''), 10);
      return isNaN(n) ? 0 : Math.max(0, n);
    }
    function updateTotal(){
      const q = normalizeQty(mQty.value);
      mQty.value = q;
      mTotal.textContent = baht(q * (modalItem.price || 0));
    }
    if (mQty) {
  mQty.addEventListener('input', updateTotal);
}

    function openItem(idx){
      const p = PRODUCTS[idx];
      if(!p) return;
      modalItem = {...p};
      mImg.src = p.image || '';
      mName.textContent = p.name || '';
      mDetail.textContent = p.detail || '';
      mPrice.textContent = baht(p.price);
      mQty.value = 1;
      updateTotal();
      modalEl.style.display = 'flex';
    }
    function closeItemModal(){ modalEl.style.display = 'none'; }
    function chgQty(d){
      let q = normalizeQty(mQty.value);
      // à¸–à¹‰à¸²à¸à¸” + à¹ƒà¸«à¹‰à¸šà¸§à¸à¸•à¸²à¸¡à¸›à¸à¸•à¸´
      if (d > 0) { q = q + d; }
      // à¸–à¹‰à¸²à¸à¸” âˆ’ à¹ƒà¸«à¹‰à¸¥à¸” à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸² 0
      else { q = Math.max(0, q + d); }
      mQty.value = q;
      updateTotal();
    }
    function confirmAdd(){
  let qty = normalizeQty(mQty.value);
  if (!Number.isFinite(qty) || qty <= 0) qty = 1;
  addToCart(modalItem, qty);
  closeItemModal();
}

    /* ====== Employee ====== */
    async function getEmployeeData(rawId){
  const url = `${API_BASE}?action=getEmployee&employeeId=${encodeURIComponent(rawId)}&debug=0`;
  const { ok, json } = await fetchJSON(url, { timeout: 12000 }).catch(()=>({ok:false}));
  return (ok && json && json.success && json.data) ? json.data : null;
}

    /* ====== Layout helpers ====== */
    function setCentered(){ container.classList.remove('top'); container.classList.add('centered'); }
    function setTop(){ container.classList.remove('centered'); container.classList.add('top'); }

function showPage(which){
  if (which === 'home') which = 'verify';

  const verify  = document.getElementById('verifyContent');
  const cate    = document.getElementById('categoryContent');
  const prod    = document.getElementById('productsContent');
  const sum     = document.getElementById('summaryContent');
  const thx     = document.getElementById('thankyouContent');
  const blocked = document.getElementById('blockedContent');

  // à¸‹à¹ˆà¸­à¸™à¸—à¸¸à¸à¸«à¸™à¹‰à¸²à¹à¸šà¸šà¸›à¸¥à¸­à¸”à¸ à¸±à¸¢
  [verify,cate,prod,sum,thx,blocked].forEach(el => el && el.classList.add('hidden'));
  document.body.className = '';

  if (which === 'verify'){
    verify?.classList.remove('hidden');
    document.body.classList.add('not-home','verify');
    setCentered();
    stage = 'verify';
    resetVerifyButton();

  } else if (which === 'category'){
    cate?.classList.remove('hidden');
    document.body.classList.add('not-home','category');
    setTop();
    if (!CATEGORIES || CATEGORIES.length === 0){
      preloadCategoriesFor(currentCompany || 'BJC');
    } else {
      renderCategories();
    }

  } else if (which === 'products'){
    prod?.classList.remove('hidden');
    document.body.classList.add('not-home','products');
    setTop();

  } else if (which === 'summary'){
    sum?.classList.remove('hidden');
    document.body.classList.add('not-home','summary');
    setTop();

  } else if (which === 'thankyou'){
    thx?.classList.remove('hidden');
    document.body.classList.add('not-home','thankyou');
    setTop();

  } else if (which === 'blocked'){
    blocked?.classList.remove('hidden');
    document.body.classList.add('not-home','blocked');
    setCentered();
  }

  // safety
  showLoadingProductsModal(false);
  window.scrollTo({ top: 0, behavior: 'auto' });
  updateCartUI();
  if (which === 'summary' || which === 'thankyou'){
    document.getElementById('cartFab')?.classList.remove('show');
  }
}

   async function showBlocked(empId){
  try{
    // à¸–à¹‰à¸²à¹ƒà¸™ cache à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸Šà¸·à¹ˆà¸­/à¸­à¸µà¹€à¸¡à¸¥ â†’ à¹„à¸›à¸”à¸¶à¸‡à¸ˆà¸²à¸ Script à¹ƒà¸«à¹‰à¹à¸™à¹ˆà¸™à¸­à¸™
    const needFetch = !CURRENT_ADMIN_CONTACT?.name || CURRENT_ADMIN_CONTACT?.name === 'â€”'
                   || !CURRENT_ADMIN_CONTACT?.email || CURRENT_ADMIN_CONTACT?.email === 'â€”';

    if (needFetch && empId){
      const info = await getBudgetAndAdmin(empId);
      if (info){
        CURRENT_BUDGET = Number.isFinite(info.budget) ? info.budget : CURRENT_BUDGET;
        CURRENT_ADMIN_CONTACT = { name: info.adminName || 'â€”', email: info.adminEmail || 'â€”' };
      }
    }
  }catch(e){
    console.warn('showBlocked: fetch admin fallback failed', e);
  }

  const nameEl = document.getElementById('blkName');
  const linkEl = document.getElementById('blkEmail');
  const textEl = document.getElementById('blkEmailText');

  if (nameEl) nameEl.textContent = CURRENT_ADMIN_CONTACT?.name || 'â€”';

  const mail = (CURRENT_ADMIN_CONTACT?.email || 'â€”').trim();
  if (textEl) textEl.textContent = `ðŸ“§ Email BU Admin: ${mail}`;
  if (linkEl) linkEl.href = (mail && mail.includes('@')) ? `mailto:${mail}` : '#';

  showPage('blocked');
}
    
function goHomeFromBlocked(){
  goHomeFromThanks(); // à¹ƒà¸Šà¹‰ flow à¹€à¸„à¸¥à¸µà¸¢à¸£à¹Œà¸•à¸°à¸à¸£à¹‰à¸²/à¸£à¸µà¹€à¸‹à¹‡à¸•à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸™
}


    function abortInflight(){
  try { inflight.categories?.abort(); } catch(_) {}
  try { inflight.items?.abort(); } catch(_) {}
  inflight.categories = null;
  inflight.items = null;
}
    
   function startForm(){
  resetVerifyForm();
  showPage('verify');
}

    function goHomeFromThanks(){
  FORCE_FRESH = true;
  abortInflight();
  CART = [];
  LAST_SUBMIT = null;
  updateCartUI();
  document.getElementById('cartMask')?.classList.remove('show');
  resetVerifyForm();
  showPage('verify');    // << à¸à¸¥à¸±à¸šà¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸² verify
}

    function resetVerifyForm(){
  abortInflight();  

  const empInput = document.getElementById('employeeId');
  const msgBox   = document.getElementById('message');

  empInput.value = '';
  msgBox.className = 'hidden';
  msgBox.textContent = '';

  stage = 'verify';
  resetVerifyButton();

  currentCompany   = null;
  CATEGORIES       = [];
  PRODUCTS         = [];
  selectedCategory = '';

  CART = [];
  LAST_SUBMIT = null;

  // âœ… à¸£à¸µà¹€à¸‹à¹‡à¸• Budget/Admin/BU cache
  CURRENT_BUDGET = null;
  CURRENT_ADMIN_CONTACT = { name: 'â€”', email: 'â€”' };
  CURRENT_BU_ADMIN = { names: [], emails: [] };

  updateCartUI();
  document.getElementById('cartMask')?.classList.remove('show');

  const cg = document.getElementById('categoryGrid'); if (cg) cg.innerHTML = '';
  const pg = document.getElementById('productGrid');  if (pg) pg.innerHTML = '';

  showCheckingModal(false);
}

    function goBack(){
  resetVerifyForm();
  showPage('verify');
}

   document.addEventListener('DOMContentLoaded', ()=>{
  const empInput = document.getElementById('employeeId');
  if (empInput){
    empInput.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' && stage === 'verify'){
        e.preventDefault();
        verifyEmployee();
      }
    });
  }

  function ensurePagesExist(){
    const need = ['verifyContent','categoryContent','productsContent','summaryContent','thankyouContent','blockedContent'];
    const missing = need.filter(id => !document.getElementById(id));
    if (missing.length){
      console.error('[PageSanity] Missing page containers:', missing);
      alert('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: à¹„à¸¡à¹ˆà¸žà¸šà¸ªà¹ˆà¸§à¸™à¸«à¸™à¹‰à¸²: ' + missing.join(', ') + ' à¸à¸£à¸¸à¸“à¸²à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š id à¹ƒà¸™ HTML');
    }
  }
  ensurePagesExist();

  // à¸«à¸™à¹‰à¸²à¹à¸£à¸ + à¹€à¸„à¸¥à¸µà¸¢à¸£à¹Œà¹‚à¸«à¸¥à¸”à¸„à¹‰à¸²à¸‡
  try { resetVerifyButton(); } catch(_) {}
  showCheckingModal(false);
  showLoadingProductsModal(false);
  showPage('verify');
  updateCartUI();
});


  // à¸«à¸™à¹‰à¸²à¹à¸£à¸ = à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™
  try { resetVerifyButton(); } catch(_) {}
  showCheckingModal(false);                    // â¬…ï¸ à¸›à¸´à¸”à¸•à¸±à¸§à¹‚à¸«à¸¥à¸”à¹€à¸œà¸·à¹ˆà¸­à¸¡à¸µà¸„à¹‰à¸²à¸‡
  showLoadingProductsModal(false);             // â¬…ï¸ à¸›à¸´à¸” overlay à¹‚à¸«à¸¥à¸”à¸ªà¸´à¸™à¸„à¹‰à¸²à¹€à¸œà¸·à¹ˆà¸­à¸„à¹‰à¸²à¸‡
  showPage('verify');
  updateCartUI();
});

   function showMsg(text, type='info'){
  const box = document.getElementById('message');
  if(!box){ alert(text); return; }

  const base = 'mt-4 p-4 rounded-lg text-center border ';
  const theme = (type === 'error')
    ? 'bg-red-50 text-red-700 border-red-200'
    : 'bg-emerald-50 text-emerald-700 border-emerald-200';

  box.className = base + theme;
  box.textContent = text;
  box.classList.remove('hidden');
}

    function stripForSearch(s){
      return String(s||'').normalize('NFKC').replace(/[\s\-â€“â€”_/\.]/g,'');
    }

    function showCheckingModal(show=true){
      const m = document.getElementById('checkingModal');
      if(!m) return;
      if(show){
        m.classList.remove('hidden');
        m.classList.add('flex');
      } else {
        m.classList.add('hidden');
        m.classList.remove('flex');
      }
    }

 // â¬…ï¸ à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¹€à¸”à¸´à¸¡: à¹€à¸Šà¹‡à¸„à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ M à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸”à¸µà¸¢à¸§
// - à¸–à¹‰à¸² M === 'NO'  => à¹€à¸”à¹‰à¸‡à¹„à¸›à¸«à¸™à¹‰à¸² "à¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“à¹„à¸¡à¹ˆà¹€à¸žà¸µà¸¢à¸‡à¸žà¸­"
// - à¸–à¹‰à¸² M !== 'NO'  => à¹„à¸›à¸•à¹ˆà¸­ (à¹‚à¸«à¸¥à¸”à¸«à¸¡à¸§à¸”à¸¯)
async function verifyEmployee(){
  const inputEl  = document.getElementById('employeeId');
  const rawInput = (inputEl?.value || '').trim();
  if (!rawInput) { showMsg('à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸žà¸™à¸±à¸à¸‡à¸²à¸™', 'error'); return; }

  showCheckingModal(true);
  showLoadingProductsModal(false);
  try{
    const emp = await getEmployeeData(rawInput);
    if (!emp) { showMsg('à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸«à¸±à¸ªà¸žà¸™à¸±à¸à¸‡à¸²à¸™à¹ƒà¸™à¸£à¸°à¸šà¸š à¸à¸£à¸¸à¸“à¸²à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡', 'error'); return; }

    CURRENT_EMP = {
      id:         emp.employeeId || emp.id || rawInput,
      company:    normalizeCompanyName(emp.company || 'BJC'),
      name:       emp.fullName   || emp.name || '-',
      costCenter: emp.costCenter || emp.cost || '-'
    };

    // âœ… à¹„à¸›à¸«à¸™à¹‰à¸² â€œà¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆâ€ à¹„à¸”à¹‰à¹€à¸¥à¸¢
    await preloadCategoriesFor(CURRENT_EMP.company);
    showPage('category');

  }catch(err){
    console.error(err);
    showMsg('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™', 'error');
  }finally{
    showCheckingModal(false);
  }
}

    function setProceedButton(){
  const btn = document.getElementById('verifyBtn');
  if(!btn) return;                           // â¬…ï¸ à¸à¸±à¸™ error
  stage = 'proceed';
  btn.disabled = false;
  btn.classList.remove('opacity-80','cursor-not-allowed');
  btn.textContent = 'à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¸•à¹ˆà¸­';
  btn.onclick = () => showPage('category');
}

    function backToVerifyProceed(){
  // à¸à¸¥à¸±à¸šà¹„à¸› verify à¹à¸¥à¹‰à¸§ â€œà¸•à¹‰à¸­à¸‡à¸à¸”à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™à¹ƒà¸«à¸¡à¹ˆâ€ à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
  resetVerifyButton();         // à¸›à¸¸à¹ˆà¸¡ = "à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™"
  showPage('verify');
  window.scrollTo({ top: 0, behavior: 'auto' });
}

    function resetVerifyButton(){
  const btn = document.getElementById('verifyBtn');
  if(!btn) return;                           // â¬…ï¸ à¸à¸±à¸™ error
  stage = 'verify';
  btn.disabled = false;
  btn.classList.remove('opacity-80','cursor-not-allowed');
  btn.textContent = 'à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™';
  btn.onclick = verifyEmployee;
}
    /* ===== Utilities: à¸§à¸±à¸™à¸—à¸µà¹ˆ/à¹€à¸§à¸¥à¸²à¹à¸šà¸šà¹„à¸—à¸¢ (à¹ƒà¸«à¸¡à¹ˆ) ===== */
    function formatDateTH(d=new Date()){
      return d.toLocaleDateString('th-TH', { day:'2-digit', month:'long', year:'numeric' });
    }
    function formatTimeTH(d=new Date()){
      return d.toLocaleTimeString('th-TH', { hour:'2-digit', minute:'2-digit' });
    }


      function asListHTML(arr){
  if(!arr || arr.length === 0) return 'â€”';
  const safe = arr.map(s => String(s||'').replace(/</g,'&lt;').replace(/>/g,'&gt;'));
  return `<div class="space-y-1">${safe.map(s=>`<div>${s}</div>`).join('')}</div>`;
}                                         

    /* ===== à¹€à¸£à¸™à¹€à¸”à¸­à¸£à¹Œà¸«à¸™à¹‰à¸² Summary (à¹ƒà¸«à¸¡à¹ˆ) ===== */
    async function renderSummary(){
  // à¸§à¸±à¸™à¸—à¸µà¹ˆ/à¹€à¸§à¸¥à¸²
 const now = new Date();
const d = String(now.getDate()).padStart(2, '0');
const m = String(now.getMonth() + 1).padStart(2, '0');
const y = now.getFullYear();  // à¸–à¹‰à¸²à¸­à¸¢à¸²à¸à¹„à¸”à¹‰ à¸ž.à¸¨. à¹ƒà¸Šà¹‰ now.getFullYear() + 543
document.getElementById('sumDate').textContent = `Date : ${d}/${m}/${y}`;
document.getElementById('sumTime').textContent = `Time : ${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}`;


      // à¸œà¸¹à¹‰à¹€à¸šà¸´à¸
  const emp = CURRENT_EMP || {};
  document.getElementById('s_company').textContent  = emp.company || '-';
  document.getElementById('s_empid').textContent    = emp.id || '-';
  document.getElementById('s_cost').textContent     = emp.costCenter || '-';
  document.getElementById('s_fullname').textContent = emp.name || '-';    
      
 try{
    const info = await getBudgetAndAdmin(emp.id || '');

    // ===== BU Admin =====
    const adminName  = info?.adminName  || 'â€”';
    const adminEmail = info?.adminEmail || 'â€”';
    CURRENT_ADMIN_CONTACT = { name: adminName, email: adminEmail };

    if (info && info.budget != null && CURRENT_BUDGET == null){
      const b = Number(info.budget);
      if (Number.isFinite(b)) CURRENT_BUDGET = b;
    }

    document.getElementById('s_bu_name').textContent  = adminName;
    document.getElementById('s_bu_email').textContent = adminEmail;

   // ===== BU Admin: à¸£à¸­à¸‡à¸£à¸±à¸šà¸«à¸¥à¸²à¸¢à¸„à¸™ (dropdown) =====
const buNameDiv  = document.getElementById('s_bu_name');
const buEmailDiv = document.getElementById('s_bu_email');
const buNameSel  = document.getElementById('s_bu_name_sel');
const buEmailInp = document.getElementById('s_bu_email_inp');

// à¸£à¸±à¸šà¸¥à¸´à¸ªà¸•à¹Œà¸ˆà¸²à¸ backend à¸–à¹‰à¸²à¸¡à¸µ (à¸„à¸²à¸”à¸«à¸§à¸±à¸‡ [{name,email}, ...])
let ADMIN_CHOICES =
  Array.isArray(info?.adminList) ? info.adminList :
  Array.isArray(info?.admins)    ? info.admins    : [];

// à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹à¸ªà¸”à¸‡à¹‚à¸«à¸¡à¸”à¹€à¸”à¸µà¸¢à¸§
function showAdminSingle(name, email){
  buNameDiv.classList.remove('hidden');
  buEmailDiv.classList.remove('hidden');
  buNameSel.classList.add('hidden');
  buEmailInp.classList.add('hidden');

  buNameDiv.textContent  = name  || 'â€”';
  buEmailDiv.textContent = email || 'â€”';

  // à¹€à¸à¹‡à¸šà¹„à¸§à¹‰à¹ƒà¸™ state à¹€à¸”à¸´à¸¡à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸¡à¸µà¸­à¸¢à¸¹à¹ˆ
  CURRENT_ADMIN_CONTACT = { name: buNameDiv.textContent, email: buEmailDiv.textContent };
}

// à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹à¸ªà¸”à¸‡à¹‚à¸«à¸¡à¸”à¸«à¸¥à¸²à¸¢à¸„à¸™ (dropdown)
function showAdminDropdown(list){
  buNameDiv.classList.add('hidden');
  buEmailDiv.classList.add('hidden');
  buNameSel.classList.remove('hidden');
  buEmailInp.classList.remove('hidden');

  // render options
  buNameSel.innerHTML = list.map((x,i)=>{
    const n = (x?.name  || 'â€”').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    return `<option value="${i}">${n}</option>`;
  }).join('');

  // default: à¸–à¹‰à¸² backend à¸ªà¹ˆà¸‡ adminName/adminEmail à¸¡à¸²à¸à¹ˆà¸­à¸™ à¹ƒà¸«à¹‰à¹€à¸¥à¸·à¸­à¸à¸•à¸²à¸¡à¸™à¸±à¹‰à¸™
  let idx = 0;
  if (adminName && adminName !== 'â€”') {
    const found = list.findIndex(x => String(x.name||'').trim() === String(adminName).trim());
    if (found >= 0) idx = found;
  }
  buNameSel.value = String(idx);

  const pick = list[idx] || {};
  buEmailInp.value = pick.email || 'â€”';

  // sync state
  CURRENT_ADMIN_CONTACT = { name: pick.name || 'â€”', email: pick.email || 'â€”' };

  // à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸Šà¸·à¹ˆà¸­ â†’ email à¹€à¸”à¹‰à¸‡à¸•à¸²à¸¡
  buNameSel.onchange = ()=>{
    const cur = list[Number(buNameSel.value) || 0] || {};
    buEmailInp.value = cur.email || 'â€”';
    CURRENT_ADMIN_CONTACT = { name: cur.name || 'â€”', email: cur.email || 'â€”' };
  };
}

// à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¸§à¹ˆà¸²à¸ˆà¸°à¹ƒà¸Šà¹‰à¹‚à¸«à¸¡à¸”à¹„à¸«à¸™
if (ADMIN_CHOICES.length > 1){
  showAdminDropdown(ADMIN_CHOICES);
} else if (ADMIN_CHOICES.length === 1){
  const only = ADMIN_CHOICES[0] || {};
  showAdminSingle(only.name || adminName, only.email || adminEmail);
} else {
  showAdminSingle(adminName, adminEmail);
}


    // ===== BU Head: à¸£à¸­à¸‡à¸£à¸±à¸šà¸«à¸¥à¸²à¸¢à¸„à¸™ (à¸‹à¹‰à¸³) à¸”à¹‰à¸§à¸¢ dropdown =====
const nameDiv   = document.getElementById('s_head_name');
const emailDiv  = document.getElementById('s_head_email');
const nameSel   = document.getElementById('s_head_name_sel');
const emailInp  = document.getElementById('s_head_email_inp');

// 1) à¸žà¸¢à¸²à¸¢à¸²à¸¡à¸­à¹ˆà¸²à¸™à¸ˆà¸²à¸ endpoint à¸«à¸¥à¸±à¸
let headName   = info?.headName  || info?.buHeadName  || 'â€”';
let headEmail  = info?.headEmail || info?.buHeadEmail || 'â€”';

// 2) à¸–à¹‰à¸²à¸¡à¸µ head list (à¸ªà¹ˆà¸‡à¸¡à¸²à¸ˆà¸²à¸ backend) à¸à¹‡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹€à¸¥à¸¢
//   à¸„à¸²à¸”à¸«à¸§à¸±à¸‡à¸£à¸¹à¸›à¹à¸šà¸š: info.headList = [{name:'...', email:'...'}, ...]
BU_HEAD_CHOICES = Array.isArray(info?.headList) ? info.headList
                  : Array.isArray(info?.heads)   ? info.heads
                  : [];

// 3) à¸–à¹‰à¸²à¸«à¸¥à¸±à¸à¹„à¸¡à¹ˆà¸¡à¸² à¹à¸¥à¸°à¹„à¸¡à¹ˆà¸¡à¸µ list â†’ à¸¥à¸­à¸‡ endpoint à¸ªà¸³à¸£à¸­à¸‡
if ((headName === 'â€”' && headEmail === 'â€”') && BU_HEAD_CHOICES.length === 0 && emp.id) {
  const h = await getBuHead(emp.id);
  if (h?.headList && Array.isArray(h.headList) && h.headList.length > 0){
    BU_HEAD_CHOICES = h.headList;  // à¹„à¸”à¹‰à¸«à¸¥à¸²à¸¢à¸„à¸™ â†’ à¹„à¸›à¹‚à¸«à¸¡à¸” dropdown
  } else if (h?.headName || h?.headEmail) {
    headName  = h.headName  || headName;
    headEmail = h.headEmail || headEmail;
  }
}

  
   
  }catch(e){
    console.warn('getBudgetAndAdmin / getBuHead (Summary) failed', e);
    document.getElementById('s_bu_name').textContent   = 'â€”';
    document.getElementById('s_bu_email').textContent  = 'â€”';
    document.getElementById('s_head_name').textContent = 'â€”';
    document.getElementById('s_head_email').textContent= 'â€”';
  }
      // à¸•à¸²à¸£à¸²à¸‡à¸£à¸²à¸¢à¸à¸²à¸£
  const wrap = document.getElementById('sumItems');
  if(!wrap) return;

  if(!CART || CART.length===0){
    wrap.innerHTML = `<div class="text-center text-gray-500">à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£</div>`;
    document.getElementById('sumTotal').textContent = 'à¸¿0';
    return;
  }     
      document.getElementById('sumTotal').textContent = baht(cartSum());  // à¹€à¸”à¸´à¸¡à¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§

// âœ… à¹€à¸žà¸´à¹ˆà¸¡: à¹à¸ªà¸”à¸‡à¸œà¸¥à¸£à¸§à¸¡à¸ˆà¸³à¸™à¸§à¸™à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸šà¸´à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¸£à¸§à¸¡à¸Šà¸´à¹‰à¸™)
document.getElementById('itemCount').textContent = String(cartCount());

     const rowsHtml = CART.map((it, i) => {
    const qty  = Number(it.qty)||0;
    const unit = Number(it.price)||0;
    const line = qty*unit;

    const name = (it.name||'-').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    const desc = (it.detail||'').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    const img  = (it.image||'').replace(/"/g,'&quot;') || 'https://via.placeholder.com/34?text=%20';
       
        return `
      <tr>
        <td class="sum-col-idx">${i+1}</td>
        <td>
          <div class="sum-itembox">
            <img class="sum-thumb" src="${img}" onerror="this.src='https://via.placeholder.com/34?text=%20'" alt="">
            <div>
              <div class="sum-name">${name}</div>
              ${desc?`<div class="sum-desc">${desc}</div>`:''}
            </div>
          </div>
        </td>
        <td class="sum-col-qty">${qty}</td>
        <td class="sum-col-unit">${baht(unit)}</td>
        <td class="sum-col-line">${baht(line)}</td>
      </tr>
    `;
  }).join('');

       const tableHtml = `
    <table class="sum-table">
      <thead>
        <tr>
          <th class="sum-col-idx">à¸¥à¸³à¸”à¸±à¸š</th>
          <th>à¸£à¸²à¸¢à¸à¸²à¸£</th>
          <th class="sum-col-qty">à¸ˆà¸³à¸™à¸§à¸™</th>
          <th class="sum-col-unit">à¸£à¸²à¸„à¸²à¸•à¹ˆà¸­à¸«à¸™à¹ˆà¸§à¸¢</th>
          <th class="sum-col-line">à¸£à¸§à¸¡</th>
        </tr>
      </thead>
      <tbody>${rowsHtml}</tbody>
      <tfoot>
        <tr>
          <td colspan="4" style="text-align:right;">à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:</td>
          <td class="sum-col-line">${baht(cartSum())}</td>
        </tr>
      </tfoot>
    </table>
  `;
  wrap.innerHTML = tableHtml;

  // à¸•à¸±à¸§à¹€à¸¥à¸‚à¸£à¸§à¸¡à¹ƒà¸•à¹‰à¸•à¸²à¸£à¸²à¸‡ (à¸‚à¸­à¸‡à¸›à¸¸à¹ˆà¸¡à¹€à¸”à¸´à¸¡)
  document.getElementById('sumTotal').textContent = baht(cartSum());
}

   /* ===== à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­à¹€à¸šà¸´à¸ (à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¸‡à¸Šà¸µà¸• Response) ===== */
let IS_SUBMITTING = false;   // âœ… à¸à¸±à¸™à¸à¸”à¸‹à¹‰à¸³
async function submitRequest(){
  if (IS_SUBMITTING) return;
  IS_SUBMITTING = true;
  showSubmittingModal(true);

  try {
    if (!CURRENT_EMP) {
      alert('à¸à¸£à¸¸à¸“à¸²à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™à¸à¹ˆà¸­à¸™');
      showPage('verify');
      return;
    }
    if (!CART || CART.length === 0) {
      alert('à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£à¹ƒà¸™à¸•à¸°à¸à¸£à¹‰à¸²');
      return;
    }

    // à¹€à¸•à¸£à¸µà¸¢à¸¡ payload
    const items = CART.map(it => ({
      name: it.name,
      qty: Number(it.qty)||0,
      price: Number(it.price)||0,
      line: (Number(it.qty)||0) * (Number(it.price)||0),
      detail: it.detail || '',
      image: it.image || ''
    }));

    const now = new Date();
    const d = String(now.getDate()).padStart(2,'0');
    const m = String(now.getMonth()+1).padStart(2,'0');
    const y = now.getFullYear() + 543;
    const dateTH = `${d}/${m}/${y}`;
    const timeTH = now.toLocaleTimeString('th-TH', { hour:'2-digit', minute:'2-digit' });

    const totalQty  = items.reduce((s, x) => s + x.qty, 0);
    const totalCost = items.reduce((s, x) => s + x.line, 0);

    const row = {
      'à¸§à¸±à¸™à¸—à¸µà¹ˆ': dateTH,
      'à¹€à¸§à¸¥à¸²': timeTH,
      'à¸šà¸£à¸´à¸©à¸±à¸—': CURRENT_EMP.company || '',
      'Cost Center': CURRENT_EMP.costCenter || '',
      'à¸£à¸«à¸±à¸ªà¸žà¸™à¸±à¸à¸‡à¸²à¸™': CURRENT_EMP.id || '',
      'à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥': CURRENT_EMP.name || '',
      'Name BU admin': (CURRENT_ADMIN_CONTACT?.name || 'â€”'),
      'Email BU Admin': (CURRENT_ADMIN_CONTACT?.email || 'â€”'),
      'à¸£à¸²à¸¢à¸à¸²à¸£à¹€à¸šà¸´à¸ (à¸Šà¸´à¹‰à¸™)': totalQty,
      'à¸¢à¸­à¸”à¹€à¸šà¸´à¸ (à¸šà¸²à¸—)': totalCost
    };
    
    
    items.forEach((it, idx) => {
      const n = idx + 1;
      row[`à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆ ${n}`] = it.name;
      row[`à¸ˆà¸³à¸™à¸§à¸™ ${n}`]   = Number(it.qty) || 0;
      row[`à¸£à¸²à¸„à¸² ${n}`]    = Number(it.price) || 0;
    });

    const params = new URLSearchParams();
    params.set('action', 'submitRequest');
    params.set('row', JSON.stringify(row));

    const ctrl = new AbortController();
    const timer = setTimeout(()=>ctrl.abort('timeout'), 30000);

    const res = await fetch(API_BASE, {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
      body: params.toString(),
      cache: 'no-store',
      signal: ctrl.signal
    }).catch(err => { throw new Error(err?.message || 'network error'); });

    clearTimeout(timer);

   const raw = await res.text();
let json = null;
try { json = JSON.parse(raw); } catch(err) {
  console.warn('[submitRequest] JSON parse failed, raw =', raw);
  // fallback à¹ƒà¸«à¹‰à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¹à¸¥à¸°à¹„à¸› thankyou à¹à¸—à¸™à¸à¸²à¸£à¸›à¸¥à¹ˆà¸­à¸¢à¸žà¸±à¸‡
  json = { success: true, nextPage: 'thank', ref: null };
}

console.log('[submitRequest] response json =', json);

if (!res.ok) {
  const msg = (json && (json.message || json.error)) || `HTTP ${res.status}`;
  throw new Error(msg);
}
if (!json || json.success !== true) {
  throw new Error((json && (json.message || json.error)) || 'à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ');
}

// à¹€à¸à¹‡à¸šà¸„à¹ˆà¸²à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡
LAST_SUBMIT = {
  ref: (json.ref || (json.row ? `REQ-${String(json.row).padStart(5,'0')}` : 'â€”')),
  totalQty: totalQty,
  totalAmount: totalCost
};

// à¹€à¸„à¸¥à¸µà¸¢à¸£à¹Œà¸•à¸°à¸à¸£à¹‰à¸²/à¸›à¸´à¸” modal à¸à¹ˆà¸­à¸™
CART = [];
updateCartUI();
showSubmittingModal(false);

// ====== à¸™à¸³à¸—à¸²à¸‡à¸­à¸¢à¹ˆà¸²à¸‡ â€œà¸•à¹‰à¸­à¸‡à¹„à¸›à¹„à¸”à¹‰â€ à¹€à¸ªà¸¡à¸­ ======
let next = 'thank';
try { next = String(json.nextPage || 'thank').toLowerCase(); } catch(_) {}

if (next === 'blocked') {
  await showBlocked(CURRENT_EMP?.id);
} else {
  showPage('thankyou');
  renderThankYou();
}

// safety à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢: à¸–à¹‰à¸²à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸›à¸´à¸”à¸­à¸°à¹„à¸£à¹€à¸¥à¸¢ à¹ƒà¸«à¹‰à¸šà¸±à¸‡à¸„à¸±à¸šà¹„à¸› thankyou
const thxHidden = document.getElementById('thankyouContent')?.classList.contains('hidden');
const blkHidden = document.getElementById('blockedContent')?.classList.contains('hidden');
if (thxHidden && blkHidden){
  console.warn('[submitRequest] fallback to Thank You (safety)');
  showPage('thankyou');
  renderThankYou();
}
    
// à¸à¸±à¸™ â€œà¹„à¸¡à¹ˆà¹€à¸›à¸´à¸”à¸­à¸°à¹„à¸£à¹€à¸¥à¸¢â€ (à¹€à¸œà¸·à¹ˆà¸­à¸‚à¹‰à¸²à¸‡à¸šà¸™ throw)
if (
  document.getElementById('thankyouContent')?.classList.contains('hidden') &&
  document.getElementById('blockedContent')?.classList.contains('hidden')
){
  console.warn('[submitRequest] fallback to Thank You (safety)');
  showPage('thankyou');
  renderThankYou();
}


  } catch (err) {
    console.error(err);
    showSubmittingModal(false);
    alert('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­: ' + (err.message || 'à¹„à¸¡à¹ˆà¸—à¸£à¸²à¸šà¸ªà¸²à¹€à¸«à¸•à¸¸'));
  } finally {
    IS_SUBMITTING = false;  // à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸à¸›à¸¸à¹ˆà¸¡à¸ªà¹ˆà¸‡
  }
}
  
    function renderThankYou(payload){
  // 1) à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸ payload (à¸–à¹‰à¸²à¸¡à¸µ) à¸«à¸£à¸·à¸­à¸ˆà¸²à¸ LAST_SUBMIT (fallback)
  const ref   = String(payload?.ref || LAST_SUBMIT?.ref || '').trim();
  const qty   = Number(payload?.totalQty ?? LAST_SUBMIT?.totalQty ?? 0);
  const total = Number(payload?.totalAmount ?? LAST_SUBMIT?.totalAmount ?? 0);

  // 2) à¸§à¸±à¸™à¸—à¸µà¹ˆà¹„à¸—à¸¢ (à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸²à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™à¸à¸±à¹ˆà¸‡ client)
  const now    = new Date();
  const dateTH = now.toLocaleDateString('th-TH', { day:'2-digit', month:'long', year:'numeric' });

  // 3) à¸­à¸±à¸›à¹€à¸”à¸• DOM à¹à¸šà¸šà¸›à¸¥à¸­à¸”à¸ à¸±à¸¢
  const elRef   = document.getElementById('tyRef');
  const elQty   = document.getElementById('tyQty');
  const elTotal = document.getElementById('tyTotal');
  const elDate  = document.getElementById('tyDate');

  if (elRef)   elRef.textContent   = ref ? `#${ref}` : 'â€”';
  if (elQty)   elQty.textContent   = `${qty.toLocaleString('th-TH')} à¸£à¸²à¸¢à¸à¸²à¸£`;
  if (elTotal) elTotal.textContent = `à¸¿${total.toLocaleString('th-TH', {minimumFractionDigits:2, maximumFractionDigits:2})}`;
  if (elDate)  elDate.textContent  = dateTH;

  // 4) à¹€à¸›à¸´à¸”à¸«à¸™à¹‰à¸² Thank You
  showPage('thankyou');
}
    
    
  </script>

  <!-- Cart Drawer -->
  <div id="cartMask" class="cart-mask" onclick="closeCart()">
    <div id="cartPanel" class="cart-panel" onclick="event.stopPropagation();">
      <div class="cart-header">
        <div style="font-size:1.3rem;font-weight:900;">à¸•à¸°à¸à¸£à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²</div>
        <div style="opacity:.85;">à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸</div>
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M3 3h2l.4 2M7 13h9l3-8H6.4M7 13L5.4 5M7 13l-2 6h13M10 21a1 1 0 110-2 1 1 0 010 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span id="cartBadgeHdr" class="cart-badge">0</span>
        </div>
      </div>

      <div id="cartItems" class="cart-body"></div>

      <div class="cart-footer">
        <div class="cart-total">
          <span>à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:</span>
          <span id="cartSum" style="color:#10b981;">à¸¿0</span>
        </div>
        <div class="cart-actions">
          <button class="cart-btn-secondary" onclick="closeCart()">â† à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸</button>
          <button class="cart-btn-primary" onclick="proceedCart()">à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£</button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
